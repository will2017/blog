<html><head title="/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/email/quoprimime.py"><style type='text/css'>
body { color: #666666; } 
a {text-decoration: none; color: #5A82F7}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #aaaaaa;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px dotted orange;}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted = new Array();
function highlight()
{
    // clear existing highlights
    for (var i = 0; i < highlighted.length; i++) {
        var elm = document.getElementById(highlighted[i]);
        if (elm != null) {
            elm.style.backgroundColor = 'white';
        }
    }
    highlighted = new Array();
    for (var i = 0; i < arguments.length; i++) {
        var elm = document.getElementById(arguments[i]);
        if (elm != null) {
            elm.style.backgroundColor='gold';
        }
        highlighted.push(arguments[i]);
    }
} </script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#re', onmouseover='highlight("re")'>re</a></li><li><a href='#quoprimime.__all__', onmouseover='highlight("quoprimime___all__")'><span class='identifier'>__all__</span></a></li><li><a href='#quoprimime.CRLF', onmouseover='highlight("quoprimime_CRLF")'><span class='identifier'>CRLF</span></a></li><li><a href='#quoprimime.NL', onmouseover='highlight("quoprimime_NL")'><span class='identifier'>NL</span></a></li><li><a href='#quoprimime.MISC_LEN', onmouseover='highlight("quoprimime_MISC_LEN")'><span class='identifier'>MISC_LEN</span></a></li><li><a href='#quoprimime.hqre', onmouseover='highlight("quoprimime_hqre")'><span class='identifier'>hqre</span></a></li><li><a href='#quoprimime.bqre', onmouseover='highlight("quoprimime_bqre")'><span class='identifier'>bqre</span></a></li><li><a href='#quoprimime.header_quopri_check', onmouseover='highlight("quoprimime_header_quopri_check")'><span class='function'>header_quopri_check</span></a></li><li><a href='#quoprimime.body_quopri_check', onmouseover='highlight("quoprimime_body_quopri_check")'><span class='function'>body_quopri_check</span></a></li><li><a href='#quoprimime.header_quopri_len', onmouseover='highlight("quoprimime_header_quopri_len")'><span class='function'>header_quopri_len</span></a></li><li><a href='#quoprimime.body_quopri_len', onmouseover='highlight("quoprimime_body_quopri_len")'><span class='function'>body_quopri_len</span></a></li><li><a href='#quoprimime._max_append', onmouseover='highlight("quoprimime__max_append")'><span class='function'>_max_append</span></a></li><li><a href='#quoprimime.unquote', onmouseover='highlight("quoprimime_unquote")'><span class='function'>unquote</span></a></li><li><a href='#quoprimime.quote', onmouseover='highlight("quoprimime_quote")'><span class='function'>quote</span></a></li><li><a href='#quoprimime.header_encode', onmouseover='highlight("quoprimime_header_encode")'><span class='function'>header_encode</span></a></li><li><a href='#quoprimime.encode', onmouseover='highlight("quoprimime_encode")'><span class='function'>encode</span></a></li><li><a href='#quoprimime.body_encode', onmouseover='highlight("quoprimime_body_encode")'><span class='identifier'>body_encode</span></a></li><li><a href='#quoprimime.encodestring', onmouseover='highlight("quoprimime_encodestring")'><span class='identifier'>encodestring</span></a></li><li><a href='#quoprimime.decode', onmouseover='highlight("quoprimime_decode")'><span class='function'>decode</span></a></li><li><a href='#quoprimime.body_decode', onmouseover='highlight("quoprimime_body_decode")'><span class='identifier'>body_decode</span></a></li><li><a href='#quoprimime.decodestring', onmouseover='highlight("quoprimime_decodestring")'><span class='identifier'>decodestring</span></a></li><li><a href='#quoprimime._unquote_match', onmouseover='highlight("quoprimime__unquote_match")'><span class='function'>_unquote_match</span></a></li><li><a href='#quoprimime.header_decode', onmouseover='highlight("quoprimime_header_decode")'><span class='function'>header_decode</span></a></li></ul>
</td><td><pre><span class='lineno'>1</span> # Copyr<a href='../re.py.html#re', id ='147957193', onmouseover='highlight(147957193)', title='re :: re'><a name='re', id ='147957193', onmouseover='highlight("147957193","1156416128","1489337413","1156416003")', title='re :: re'>i</a>g</a>ht (C) 2001-2006 Python Software Foundation
<span class='lineno'>2</span> # Author: Ben Gertzfield
<span class='lineno'>3</span> # Contact: email-sig@python.org
<span class='lineno'>4</span> 
<span class='lineno'>5</span> <span class='doc-string'>&quot;&quot;&quot;Quoted-printable content transfer encoding per RFCs 2045-2047.
<span class='lineno'>6</span> 
<span class='lineno'>7</span> This module handles the content transfer encoding method defined in RFC 2045
<span class='lineno'>8</span> to encode US ASCII-like 8-bit data called `quoted-printable&#39;.  It is used to
<span class='lineno'>9</span> safely encode text that is in a character set similar to the 7-bit US ASCII
<span class='lineno'>10</span> character set, but that includes some 8-bit characters that are normally not
<span class='lineno'>11</span> allowed in email bodies or headers.
<span class='lineno'>12</span> 
<span class='lineno'>13</span> Quoted-printable is very space-inefficient for encoding binary files; use the
<span class='lineno'>14</span> email.base64mime module for that instead.
<span class='lineno'>15</span> 
<span class='lineno'>16</span> This module provides an interface to encode and decode both headers and bodies
<span class='lineno'>17</span> with quoted-printable encoding.
<span class='lineno'>18</span> 
<span class='lineno'>19</span> RFC 2045 defines a method for including character set information in an
<span class='lineno'>20</span> `encoded-word&#39; in a header.  This method is commonly used for 8-bit real names
<span class='lineno'>21</span> in To:/From:/Cc: etc. fields, as well as Subject: lines.
<span class='lineno'>22</span> 
<span class='lineno'>23</span> This module does not do the line wrapping or end-of-line character
<span class='lineno'>24</span> conversion necessary for proper internationalized headers; it only
<span class='lineno'>25</span> does dumb encoding and decoding.  To deal with the various line
<span class='lineno'>26</span> wrapping issues, use the email.header module.
<span class='lineno'>27</span> &quot;&quot;&quot;</span>
<span class='lineno'>28</span> 
<span class='lineno'>29</span> <a name='quoprimime.__all__', id ='1156420093', title='quoprimime.__all__ :: [str]'>__all__</a> = [
<span class='lineno'>30</span>     &#39;body_decode&#39;,
<span class='lineno'>31</span>     &#39;body_encode&#39;,
<span class='lineno'>32</span>     &#39;body_quopri_check&#39;,
<span class='lineno'>33</span>     &#39;body_quopri_len&#39;,
<span class='lineno'>34</span>     &#39;decode&#39;,
<span class='lineno'>35</span>     &#39;decodestring&#39;,
<span class='lineno'>36</span>     &#39;encode&#39;,
<span class='lineno'>37</span>     &#39;encodestring&#39;,
<span class='lineno'>38</span>     &#39;header_decode&#39;,
<span class='lineno'>39</span>     &#39;header_encode&#39;,
<span class='lineno'>40</span>     &#39;header_quopri_check&#39;,
<span class='lineno'>41</span>     &#39;header_quopri_len&#39;,
<span class='lineno'>42</span>     &#39;quote&#39;,
<span class='lineno'>43</span>     &#39;unquote&#39;,
<span class='lineno'>44</span>     ]
<span class='lineno'>45</span> 
<span class='lineno'>46</span> import re
<span class='lineno'>47</span> 
<span class='lineno'>48</span> from string import hexdigits
<span class='lineno'>49</span> from email.utils import fix_eols
<span class='lineno'>50</span> 
<span class='lineno'>51</span> <span class='constant'><a name='quoprimime.CRLF', id ='1156416994', onmouseover='highlight("1156210472","1156210565","1156267233","1156267046")', title='quoprimime.CRLF :: str'>CRLF</span></a> = &#39;\r\n&#39;
<span class='lineno'>52</span> <a name='quoprimime.NL', id ='1156416959', onmouseover='highlight("1156299900","1156206560","1156383481")', title='quoprimime.NL :: str'><span class='constant'>NL</a></span> = &#39;\n&#39;
<span class='lineno'>53</span> 
<span class='lineno'>54</span> # See also Charset.py
<span class='lineno'>55</span> <span class='constant'><a name='quoprimime.MISC_LEN', id ='1156416212', onmouseover='highlight(1156327645)', title='quoprimime.MISC_LEN :: int'>MISC_LEN</a></span> = <span class='number'>7</span>
<span class='lineno'>56</span> 
<span class='lineno'>57</span> <a name='quoprimime.hqre', id ='1156416156', onmouseover='highlight("1156414202","1156324921","1156391167")', title='quoprimime.hqre :: ?'>hqre</a> = <a href='../re.py.html#re', id ='1156416128', onmouseover='highlight(147957193)', title='re :: re'>re</a>.<a href='../re.py.html#re.compile', id ='1156416125', onmouseover='highlight(2025599818)', title='re.compile :: (str, int) -> ? | (my_unicode, int) -> ?'>compile</a>(r&#39;[^-a-zA-Z0-9!*+/ ]&#39;)
<span class='lineno'>58</span> <a name='quoprimime.bqre', id ='1156416031', onmouseover='highlight("1156413144","1156243111","1156389126")', title='quoprimime.bqre :: ?'>bqre</a> = <a href='../re.py.html#re', id ='1156416003', onmouseover='highlight(147957193)', title='re :: re'>re</a>.<a href='../re.py.html#re.compile', id ='1156416000', onmouseover='highlight(2025599818)', title='re.compile :: (str, int) -> ? | (my_unicode, int) -> ?'>compile</a>(r&#39;[^ !-&lt;&gt;-~\t]&#39;)
<span class='lineno'>59</span> 
<span class='lineno'>60</span> 
<span class='lineno'>61</span> 
<span class='lineno'>62</span> # Helpers
<span class='lineno'>63</span> def <a name='quoprimime.header_quopri_check', id ='1156415222', title='quoprimime.header_quopri_check :: ? -> ?'><span class='function'>header_quopri_check</span></a>(<span class='parameter'><a name='quoprimime.header_quopri_check@c', id ='1156415160', onmouseover='highlight(1156414170)', title='quoprimime.header_quopri_check@c :: ?'>c</a></span>):
<span class='lineno'>64</span>     <span class='doc-string'>&quot;&quot;&quot;Return True if the character should be escaped with header quopri.&quot;&quot;&quot;</span>
<span class='lineno'>65</span>     return <a href='http://docs.python.org/library/functions.html#bool', id ='1156414228', onmouseover='highlight(399588157)', title='__builtin__.bool :: bool'>bool</a>(<a href='#quoprimime.hqre', id ='1156414202', onmouseover='highlight(1156416156)', title='quoprimime.hqre :: ?'>hqre</a>.match(<a href='#quoprimime.header_quopri_check@c', id ='1156414170', onmouseover='highlight(1156415160)', title='quoprimime.header_quopri_check@c :: ?'>c</a>))
<span class='lineno'>66</span> 
<span class='lineno'>67</span> 
<span class='lineno'>68</span> def <a name='quoprimime.body_quopri_check', id ='1156414139', title='quoprimime.body_quopri_check :: ? -> ?'><span class='function'>body_quopri_check</a></span>(<a name='quoprimime.body_quopri_check@c', id ='1156414079', onmouseover='highlight(1156413112)', title='quoprimime.body_quopri_check@c :: ?'><span class='parameter'>c</span></a>):
<span class='lineno'>69</span>     <span class='doc-string'>&quot;&quot;&quot;Return True if the character should be escaped with body quopri.&quot;&quot;&quot;</span>
<span class='lineno'>70</span>     return <a href='http://docs.python.org/library/functions.html#bool', id ='1156413149', onmouseover='highlight(399588157)', title='__builtin__.bool :: bool'>bool</a>(<a href='#quoprimime.bqre', id ='1156413144', onmouseover='highlight(1156416031)', title='quoprimime.bqre :: ?'>bqre</a>.match(<a href='#quoprimime.body_quopri_check@c', id ='1156413112', onmouseover='highlight(1156414079)', title='quoprimime.body_quopri_check@c :: ?'>c</a>))
<span class='lineno'>71</span> 
<span class='lineno'>72</span> 
<span class='lineno'>73</span> def <span class='function'><a name='quoprimime.header_quopri_len', id ='1156392249', onmouseover='highlight("841784806","841817473","841782946")', title='quoprimime.header_quopri_len :: ? -> int'>header_quopri_len</a></span>(<a name='quoprimime.header_quopri_len@s', id ='1156392189', onmouseover='highlight(1156391202)', title='quoprimime.header_quopri_len@s :: ?'><span class='parameter'>s</a></span>):
<span class='lineno'>74</span>     <span class='doc-string'>&quot;&quot;&quot;Return the length of str when it is encoded with header quopri.&quot;&quot;&quot;</span>
<span class='lineno'>75</span>     <span class='identifier'><a name='quoprimime.header_quopri_len&count', id ='1156391288', onmouseover='highlight("1156390241","1156391077","1156390305")', title='quoprimime.header_quopri_len&count :: int'>count</a></span> = <span class='number'>0</span>
<span class='lineno'>76</span>     for <a name='quoprimime.header_quopri_len&c', id ='1156391228', onmouseover='highlight(1156391135)', title='quoprimime.header_quopri_len&c :: ?'>c</a> in <a href='#quoprimime.header_quopri_len@s', id ='1156391202', onmouseover='highlight(1156392189)', title='quoprimime.header_quopri_len@s :: ?'>s</a>:
<span class='lineno'>77</span>         if <a href='#quoprimime.hqre', id ='1156391167', onmouseover='highlight(1156416156)', title='quoprimime.hqre :: ?'>hqre</a>.match(<a href='#quoprimime.header_quopri_len&c', id ='1156391135', onmouseover='highlight(1156391228)', title='quoprimime.header_quopri_len&c :: ?'>c</a>):
<span class='lineno'>78</span>             <a href='#quoprimime.header_quopri_len&count', id ='1156391077', onmouseover='highlight(1156391288)', title='quoprimime.header_quopri_len&count :: int'>count</a> += <span class='number'>3</span>
<span class='lineno'>79</span>         else:
<span class='lineno'>80</span>             <a href='#quoprimime.header_quopri_len&count', id ='1156390305', onmouseover='highlight(1156391288)', title='quoprimime.header_quopri_len&count :: int'>count</a> += <span class='number'>1</span>
<span class='lineno'>81</span>     return <a href='#quoprimime.header_quopri_len&count', id ='1156390241', onmouseover='highlight(1156391288)', title='quoprimime.header_quopri_len&count :: int'>count</a>
<span class='lineno'>82</span> 
<span class='lineno'>83</span> 
<span class='lineno'>84</span> def <a name='quoprimime.body_quopri_len', id ='1156390208', title='quoprimime.body_quopri_len :: ? -> int'><span class='function'>body_quopri_len</a></span>(<span class='parameter'><a name='quoprimime.body_quopri_len@str', id ='1156390150', onmouseover='highlight(1156389184)', title='quoprimime.body_quopri_len@str :: ?'>str</span></a>):
<span class='lineno'>85</span>     <span class='doc-string'>&quot;&quot;&quot;Return the length of str when it is encoded with body quopri.&quot;&quot;&quot;</span>
<span class='lineno'>86</span>     <a name='quoprimime.body_quopri_len&count', id ='1156389249', onmouseover='highlight("1156388285","1156388406","1156388221")', title='quoprimime.body_quopri_len&count :: int'><span class='identifier'>count</a></span> = <span class='number'>0</span>
<span class='lineno'>87</span>     for <a name='quoprimime.body_quopri_len&c', id ='1156389189', onmouseover='highlight(1156389094)', title='quoprimime.body_quopri_len&c :: ?'>c</a> in <a href='#quoprimime.body_quopri_len@str', id ='1156389184', onmouseover='highlight(1156390150)', title='quoprimime.body_quopri_len@str :: ?'>str</a>:
<span class='lineno'>88</span>         if <a href='#quoprimime.bqre', id ='1156389126', onmouseover='highlight(1156416031)', title='quoprimime.bqre :: ?'>bqre</a>.match(<a href='#quoprimime.body_quopri_len&c', id ='1156389094', onmouseover='highlight(1156389189)', title='quoprimime.body_quopri_len&c :: ?'>c</a>):
<span class='lineno'>89</span>             <a href='#quoprimime.body_quopri_len&count', id ='1156388406', onmouseover='highlight(1156389249)', title='quoprimime.body_quopri_len&count :: int'>count</a> += <span class='number'>3</span>
<span class='lineno'>90</span>         else:
<span class='lineno'>91</span>             <a href='#quoprimime.body_quopri_len&count', id ='1156388285', onmouseover='highlight(1156389249)', title='quoprimime.body_quopri_len&count :: int'>count</a> += <span class='number'>1</span>
<span class='lineno'>92</span>     return <a href='#quoprimime.body_quopri_len&count', id ='1156388221', onmouseover='highlight(1156389249)', title='quoprimime.body_quopri_len&count :: int'>count</a>
<span class='lineno'>93</span> 
<span class='lineno'>94</span> 
<span class='lineno'>95</span> def <a name='quoprimime._max_append', id ='1156388188', onmouseover='highlight("1156323834","1156324831","1156325910","1312920265")', title='quoprimime._max_append :: ([?], str, int, str) -> None'><span class='function'>_max_append</a></span>(<a name='quoprimime._max_append@L', id ='1156388134', onmouseover='highlight("1156387234","1156387384","1156386364","1156387352","1156386485")', title='quoprimime._max_append@L :: [?]'><span class='parameter'>L</a></span>, <span class='parameter'><a name='quoprimime._max_append@s', id ='1156388131', onmouseover='highlight("1156387322","1156386334","1156387200","1156386426")', title='quoprimime._max_append@s :: str'>s</a></span>, <a name='quoprimime._max_append@maxlen', id ='1156388128', onmouseover='highlight(1156387173)', title='quoprimime._max_append@maxlen :: int'><span class='parameter'>maxlen</span></a>, <a name='quoprimime._max_append@extra', id ='1156387448', onmouseover='highlight(1156386455)', title='quoprimime._max_append@extra :: str'><span class='parameter'>extra</a></span>=&#39;&#39;):
<span class='lineno'>96</span>     if not <a href='#quoprimime._max_append@L', id ='1156387384', onmouseover='highlight(1156388134)', title='quoprimime._max_append@L :: [?]'>L</a>:
<span class='lineno'>97</span>         <a href='#quoprimime._max_append@L', id ='1156387352', onmouseover='highlight(1156388134)', title='quoprimime._max_append@L :: [?]'>L</a>.<a href='http://docs.python.org/library/stdtypes.html', id ='1156387329', onmouseover='highlight(592677897)', title='__builtin__.list.append :: ? -> None'>append</a>(<a href='#quoprimime._max_append@s', id ='1156387322', onmouseover='highlight(1156388131)', title='quoprimime._max_append@s :: str'>s</a>.<a href='http://docs.python.org/library/stdtypes.html#str.lstrip', id ='1156387320', onmouseover='highlight(341213347)', title='__builtin__.str.lstrip :: ? -> str'>lstrip</a>())
<span class='lineno'>98</span>     elif <a href='http://docs.python.org/library/functions.html#len', id ='1156387259', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime._max_append@L', id ='1156387234', onmouseover='highlight(1156388134)', title='quoprimime._max_append@L :: [?]'>L</a>[<span class='number'>-1</span>]) + <a href='http://docs.python.org/library/functions.html#len', id ='1156387204', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime._max_append@s', id ='1156387200', onmouseover='highlight(1156388131)', title='quoprimime._max_append@s :: str'>s</a>) &lt;= <a href='#quoprimime._max_append@maxlen', id ='1156387173', onmouseover='highlight(1156388128)', title='quoprimime._max_append@maxlen :: int'>maxlen</a>:
<span class='lineno'>99</span>         <a href='#quoprimime._max_append@L', id ='1156386485', onmouseover='highlight(1156388134)', title='quoprimime._max_append@L :: [?]'>L</a>[<span class='number'>-1</span>] += <a href='#quoprimime._max_append@extra', id ='1156386455', onmouseover='highlight(1156387448)', title='quoprimime._max_append@extra :: str'>extra</a> + <a href='#quoprimime._max_append@s', id ='1156386426', onmouseover='highlight(1156388131)', title='quoprimime._max_append@s :: str'>s</a>
<span class='lineno'>100</span>     else:
<span class='lineno'>101</span>         <a href='#quoprimime._max_append@L', id ='1156386364', onmouseover='highlight(1156388134)', title='quoprimime._max_append@L :: [?]'>L</a>.<a href='http://docs.python.org/library/stdtypes.html', id ='1156386362', onmouseover='highlight(592677897)', title='__builtin__.list.append :: ? -> None'>append</a>(<a href='#quoprimime._max_append@s', id ='1156386334', onmouseover='highlight(1156388131)', title='quoprimime._max_append@s :: str'>s</a>.<a href='http://docs.python.org/library/stdtypes.html#str.lstrip', id ='1156386332', onmouseover='highlight(341213347)', title='__builtin__.str.lstrip :: ? -> str'>lstrip</a>())
<span class='lineno'>102</span> 
<span class='lineno'>103</span> 
<span class='lineno'>104</span> def <a name='quoprimime.unquote', id ='1156386274', onmouseover='highlight("1156176865","1489341259")', title='quoprimime.unquote :: ? -> ?'><span class='function'>unquote</span></a>(<a name='quoprimime.unquote@s', id ='1156386266', onmouseover='highlight(1156385282)', title='quoprimime.unquote@s :: ?'><span class='parameter'>s</span></a>):
<span class='lineno'>105</span>     <span class='doc-string'>&quot;&quot;&quot;Turn a string in the form =AB to the ASCII character with value 0xab&quot;&quot;&quot;</span>
<span class='lineno'>106</span>     return <a href='http://docs.python.org/library/functions.html#chr', id ='1156385311', onmouseover='highlight(126373308)', title='__builtin__.chr :: ? -> str'>chr</a>(<a href='http://docs.python.org/library/functions.html#int', id ='1156385307', onmouseover='highlight(132095102)', title='__builtin__.int :: int'>int</a>(<a href='#quoprimime.unquote@s', id ='1156385282', onmouseover='highlight(1156386266)', title='quoprimime.unquote@s :: ?'>s</a>[<span class='number'>1</span>:<span class='number'>3</span>], <span class='number'>16</span>))
<span class='lineno'>107</span> 
<span class='lineno'>108</span> 
<span class='lineno'>109</span> def <a name='quoprimime.quote', id ='1156384570', onmouseover='highlight("1156236353","1156242341")', title='quoprimime.quote :: str -> str'><span class='function'>quote</span></a>(<span class='parameter'><a name='quoprimime.quote@c', id ='1156384564', onmouseover='highlight(1156384472)', title='quoprimime.quote@c :: str'>c</span></a>):
<span class='lineno'>110</span>     return &quot;=%02X&quot; % <a href='http://docs.python.org/library/functions.html#ord', id ='1156384476', onmouseover='highlight(137740016)', title='__builtin__.ord :: ? -> int'>ord</a>(<a href='#quoprimime.quote@c', id ='1156384472', onmouseover='highlight(1156384564)', title='quoprimime.quote@c :: str'>c</a>)
<span class='lineno'>111</span> 
<span class='lineno'>112</span> 
<span class='lineno'>113</span> 
<span class='lineno'>114</span> def <span class='function'><a name='quoprimime.header_encode', id ='1156384440', onmouseover='highlight("841839486","841815617")', title='quoprimime.header_encode :: (?, str, ?, int, str) -> ?'>header_encode</span></a>(<a name='quoprimime.header_encode@header', id ='1156384384', title='quoprimime.header_encode@header :: ?'><a name='quoprimime.header_encode@header', id ='1156384384', onmouseover='highlight("1156331428","1156331493","1156330595","1156326904")', title='quoprimime.header_encode@header :: ?'><span class='parameter'>header</a></a></span>, <span class='parameter'><a name='quoprimime.header_encode@charset', id ='1156384376', onmouseover='highlight("1156327677","1156300830")', title='quoprimime.header_encode@charset :: str'>charset</a></span>=&quot;iso-8859-1&quot;, <span class='parameter'><a name='quoprimime.header_encode@keep_eols', id ='1156384291', onmouseover='highlight(1156330716)', title='quoprimime.header_encode@keep_eols :: ?'>keep_eols</a></span>=<a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1156383609', onmouseover='highlight(2016665419)', title='__builtin__.False :: ?'>False</a>,
<span class='lineno'>115</span>                   <span class='parameter'><a name='quoprimime.header_encode@maxlinelen', id ='1156383542', onmouseover='highlight("1156327715","1156328798")', title='quoprimime.header_encode@maxlinelen :: int'>maxlinelen</span></a>=<span class='number'>76</span>, <span class='parameter'><a name='quoprimime.header_encode@eol', id ='1156383485', onmouseover='highlight(1156301637)', title='quoprimime.header_encode@eol :: str'>eol</span></a>=<a href='#quoprimime.NL', id ='1156383481', onmouseover='highlight(1156416959)', title='quoprimime.NL :: str'>NL</a>):
<span class='lineno'>116</span>     <span class='doc-string'>&quot;&quot;&quot;Encode a single header line with quoted-printable (like) encoding.
<span class='lineno'>117</span> 
<span class='lineno'>118</span>     Defined in RFC 2045, this `Q&#39; encoding is similar to quoted-printable, but
<span class='lineno'>119</span>     used specifically for email header fields to allow charsets with mostly 7
<span class='lineno'>120</span>     bit characters (and some 8 bit) to remain more or less readable in non-RFC
<span class='lineno'>121</span>     2045 aware mail clients.
<span class='lineno'>122</span> 
<span class='lineno'>123</span>     charset names the character set to use to encode the header.  It defaults
<span class='lineno'>124</span>     to iso-8859-1.
<span class='lineno'>125</span> 
<span class='lineno'>126</span>     The resulting string will be in the form:
<span class='lineno'>127</span> 
<span class='lineno'>128</span>     &quot;=?charset?q?I_f=E2rt_in_your_g=E8n=E8ral_dire=E7tion?\\n
<span class='lineno'>129</span>       =?charset?q?Silly_=C8nglish_Kn=EEghts?=&quot;
<span class='lineno'>130</span> 
<span class='lineno'>131</span>     with each line wrapped safely at, at most, maxlinelen characters (defaults
<span class='lineno'>132</span>     to 76 characters).  If maxlinelen is None, the entire string is encoded in
<span class='lineno'>133</span>     one chunk with no splitting.
<span class='lineno'>134</span> 
<span class='lineno'>135</span>     End-of-line characters (\\r, \\n, \\r\\n) will be automatically converted
<span class='lineno'>136</span>     to the canonical email line separator \\r\\n unless the keep_eols
<span class='lineno'>137</span>     parameter is True (the default is False).
<span class='lineno'>138</span> 
<span class='lineno'>139</span>     Each line of the header will be terminated in the value of eol, which
<span class='lineno'>140</span>     defaults to &quot;\\n&quot;.  Set this to &quot;\\r\\n&quot; if you are using the result of
<span class='lineno'>141</span>     this function directly in email.
<span class='lineno'>142</span>     &quot;&quot;&quot;</span>
<span class='lineno'>143</span>     # Return empty headers unchanged
<span class='lineno'>144</span>     if not <a href='#quoprimime.header_encode@header', id ='1156331493', onmouseover='highlight("1156330655","1156384384","1156330655","1156384384")', title='{quoprimime.header_encode@header :: ? | quoprimime.header_encode@header :: ?}'>header</a>:
<span class='lineno'>145</span>         return <a href='#quoprimime.header_encode@header', id ='1156331428', onmouseover='highlight("1156330655","1156384384","1156330655","1156384384")', title='{quoprimime.header_encode@header :: ? | quoprimime.header_encode@header :: ?}'>header</a>
<span class='lineno'>146</span> 
<span class='lineno'>147</span>     if not <a href='#quoprimime.header_encode@keep_eols', id ='1156330716', onmouseover='highlight(1156384291)', title='quoprimime.header_encode@keep_eols :: ?'>keep_eols</a>:
<span class='lineno'>148</span>         <a name='quoprimime.header_encode@header', id ='1156330655', onmouseover='highlight("1156331428","1156331493","1156330595","1156326904")', title='quoprimime.header_encode@header :: ?'><span class='parameter'>header</a></span> = fix_eols(<a href='#quoprimime.header_encode@header', id ='1156330595', onmouseover='highlight("1156330655","1156384384","1156330655","1156384384")', title='{quoprimime.header_encode@header :: ? | quoprimime.header_encode@header :: ?}'>header</a>)
<span class='lineno'>149</span> 
<span class='lineno'>150</span>     # Quopri encode each line, in encoded chunks no greater than maxlinelen in
<span class='lineno'>151</span>     # length, after the RFC chrome is added in.
<span class='lineno'>152</span>     <a name='quoprimime.header_encode&quoted', id ='1156329510', onmouseover='highlight("1156300740","1156324798","1156323801","1156325856")', title='quoprimime.header_encode&quoted :: [?]'><span class='identifier'>quoted</a></span> = []
<span class='lineno'>153</span>     if <a href='#quoprimime.header_encode@maxlinelen', id ='1156328798', onmouseover='highlight(1156383542)', title='quoprimime.header_encode@maxlinelen :: int'>maxlinelen</a> is <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1156328763', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</span></a>:
<span class='lineno'>154</span>         # An obnoxiously large number that&#39;s good enough
<span class='lineno'>155</span>         <span class='identifier'><a name='quoprimime.header_encode&max_encoded', id ='1156328545', onmouseover='highlight("1156302880","1156324766","1156325822")', title='quoprimime.header_encode&max_encoded :: int'>max_encoded</span></a> = <span class='number'>100000</span>
<span class='lineno'>156</span>     else:
<span class='lineno'>157</span>         <a name='quoprimime.header_encode&max_encoded', id ='1156327771', onmouseover='highlight("1156302880","1156324766","1156325822")', title='quoprimime.header_encode&max_encoded :: int'>max_encoded</a> = <a href='#quoprimime.header_encode@maxlinelen', id ='1156327715', onmouseover='highlight(1156383542)', title='quoprimime.header_encode@maxlinelen :: int'>maxlinelen</a> - <a href='http://docs.python.org/library/functions.html#len', id ='1156327681', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime.header_encode@charset', id ='1156327677', onmouseover='highlight(1156384376)', title='quoprimime.header_encode@charset :: str'>charset</a>) - <a href='#quoprimime.MISC_LEN', id ='1156327645', onmouseover='highlight(1156416212)', title='quoprimime.MISC_LEN :: int'>MISC_LEN</a> - <span class='number'>1</span>
<span class='lineno'>158</span> 
<span class='lineno'>159</span>     for <a name='quoprimime.header_encode&c', id ='1156326909', onmouseover='highlight("1156324769","1156324889","1156326625","1156302884")', title='quoprimime.header_encode&c :: ?'>c</a> in <a href='#quoprimime.header_encode@header', id ='1156326904', onmouseover='highlight("1156330655","1156384384")', title='quoprimime.header_encode@header :: ?'>header</a>:
<span class='lineno'>160</span>         # Space may be represented as _ instead of =20 for readability
<span class='lineno'>161</span>         if <a href='#quoprimime.header_encode&c', id ='1156326625', onmouseover='highlight(1156326909)', title='quoprimime.header_encode&c :: ?'>c</a> == &#39; &#39;:
<span class='lineno'>162</span>             <a href='#quoprimime._max_append', id ='1156325910', onmouseover='highlight(1156388188)', title='quoprimime._max_append :: ([?], str, int, str) -> None'>_max_append</a>(<a href='#quoprimime.header_encode&quoted', id ='1156325856', onmouseover='highlight(1156329510)', title='quoprimime.header_encode&quoted :: [?]'>quoted</a>, &#39;_&#39;, <a href='#quoprimime.header_encode&max_encoded', id ='1156325822', onmouseover='highlight("1156328545","1156327771")', title='quoprimime.header_encode&max_encoded :: int'>max_encoded</a>)
<span class='lineno'>163</span>         # These characters can be included verbatim
<span class='lineno'>164</span>         elif not <a href='#quoprimime.hqre', id ='1156324921', onmouseover='highlight(1156416156)', title='quoprimime.hqre :: ?'>hqre</a>.match(<a href='#quoprimime.header_encode&c', id ='1156324889', onmouseover='highlight(1156326909)', title='quoprimime.header_encode&c :: ?'>c</a>):
<span class='lineno'>165</span>             <a href='#quoprimime._max_append', id ='1156324831', onmouseover='highlight(1156388188)', title='quoprimime._max_append :: ([?], str, int, str) -> None'>_max_append</a>(<a href='#quoprimime.header_encode&quoted', id ='1156324798', onmouseover='highlight(1156329510)', title='quoprimime.header_encode&quoted :: [?]'>quoted</a>, <a href='#quoprimime.header_encode&c', id ='1156324769', onmouseover='highlight(1156326909)', title='quoprimime.header_encode&c :: ?'>c</a>, <a href='#quoprimime.header_encode&max_encoded', id ='1156324766', onmouseover='highlight("1156328545","1156327771")', title='quoprimime.header_encode&max_encoded :: int'>max_encoded</a>)
<span class='lineno'>166</span>         # Otherwise, replace with hex value like =E2
<span class='lineno'>167</span>         else:
<span class='lineno'>168</span>             <a href='#quoprimime._max_append', id ='1156323834', onmouseover='highlight(1156388188)', title='quoprimime._max_append :: ([?], str, int, str) -> None'>_max_append</a>(<a href='#quoprimime.header_encode&quoted', id ='1156323801', onmouseover='highlight(1156329510)', title='quoprimime.header_encode&quoted :: [?]'>quoted</a>, &quot;=%02X&quot; % <a href='http://docs.python.org/library/functions.html#ord', id ='1156323741', onmouseover='highlight(137740016)', title='__builtin__.ord :: ? -> int'>ord</a>(<a href='#quoprimime.header_encode&c', id ='1156302884', onmouseover='highlight(1156326909)', title='quoprimime.header_encode&c :: ?'>c</a>), <a href='#quoprimime.header_encode&max_encoded', id ='1156302880', onmouseover='highlight("1156328545","1156327771")', title='quoprimime.header_encode&max_encoded :: int'>max_encoded</a>)
<span class='lineno'>169</span> 
<span class='lineno'>170</span>     # Now add the RFC chrome to each encoded chunk and glue the chunks
<span class='lineno'>171</span>     # together.  BAW: should we be able to specify the leading whitespace in
<span class='lineno'>172</span>     # the joiner?
<span class='lineno'>173</span>     <a name='quoprimime.header_encode&joiner', id ='1156301667', onmouseover='highlight(1156300923)', title='quoprimime.header_encode&joiner :: str'><span class='identifier'>joiner</a></span> = <a href='#quoprimime.header_encode@eol', id ='1156301637', onmouseover='highlight(1156383485)', title='quoprimime.header_encode@eol :: str'>eol</a> + &#39; &#39;
<span class='lineno'>174</span>     return <a href='#quoprimime.header_encode&joiner', id ='1156300923', onmouseover='highlight(1156301667)', title='quoprimime.header_encode&joiner :: str'>joiner</a>.<a href='http://docs.python.org/library/stdtypes.html#str.join', id ='1156300895', onmouseover='highlight(760704539)', title='__builtin__.str.join :: ? -> str'>join</a>([&#39;=?%s?q?%s?=&#39; % (<a href='#quoprimime.header_encode@charset', id ='1156300830', onmouseover='highlight(1156384376)', title='quoprimime.header_encode@charset :: str'>charset</a>, <a href='#quoprimime.header_encode&line', id ='1156300800', onmouseover='highlight(1156300769)', title='quoprimime.header_encode&line :: ?'>line</a>) for <a name='quoprimime.header_encode&line', id ='1156300769', onmouseover='highlight("1156300800","1156300769")', title='quoprimime.header_encode&line :: ?'><a href='#quoprimime.header_encode&line', id ='1156300769', onmouseover='highlight(1156300769)', title='quoprimime.header_encode&line :: ?'>line</a></a> in <a href='#quoprimime.header_encode&quoted', id ='1156300740', onmouseover='highlight(1156329510)', title='quoprimime.header_encode&quoted :: [?]'>quoted</a>])
<span class='lineno'>175</span> 
<span class='lineno'>176</span> 
<span class='lineno'>177</span> 
<span class='lineno'>178</span> def <span class='function'><a name='quoprimime.encode', id ='1156300681', onmouseover='highlight("1156207684","1156208420")', title='quoprimime.encode :: (str, ?, int, str) -> str'>encode</span></a>(<a name='quoprimime.encode@body', id ='1156300002', onmouseover='highlight("1156272094","1156272962","1156272899","1156268287")', title='quoprimime.encode@body :: str'><a name='quoprimime.encode@body', id ='1156300002', onmouseover='highlight("1156272094","1156272962","1156272899","1156268287")', title='quoprimime.encode@body :: ?'>body</a></a>, <span class='parameter'><a name='quoprimime.encode@binary', id ='1156299996', onmouseover='highlight(1156272840)', title='quoprimime.encode@binary :: ?'>binary</a></span>=<a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1156299968', onmouseover='highlight(2016665419)', title='__builtin__.False :: ?'>False</a>, <a name='quoprimime.encode@maxlinelen', id ='1156299940', onmouseover='highlight("1156235513","1156239298")', title='quoprimime.encode@maxlinelen :: int'><span class='parameter'>maxlinelen</span></a>=<span class='number'>76</span>, <a name='quoprimime.encode@eol', id ='1156299904', onmouseover='highlight("1156209667","1156238435","1156234646","1156212482")', title='quoprimime.encode@eol :: str'><span class='parameter'>eol</a></span>=<a href='#quoprimime.NL', id ='1156299900', onmouseover='highlight(1156416959)', title='quoprimime.NL :: str'>NL</a>):
<span class='lineno'>179</span>     <span class='doc-string'>&quot;&quot;&quot;Encode with quoted-printable, wrapping at maxlinelen characters.
<span class='lineno'>180</span> 
<span class='lineno'>181</span>     If binary is False (the default), end-of-line characters will be converted
<span class='lineno'>182</span>     to the canonical email end-of-line sequence \\r\\n.  Otherwise they will
<span class='lineno'>183</span>     be left verbatim.
<span class='lineno'>184</span> 
<span class='lineno'>185</span>     Each line of encoded text will end with eol, which defaults to &quot;\\n&quot;.  Set
<span class='lineno'>186</span>     this to &quot;\\r\\n&quot; if you will be using the result of this function directly
<span class='lineno'>187</span>     in an email.
<span class='lineno'>188</span> 
<span class='lineno'>189</span>     Each line will be wrapped at, at most, maxlinelen characters (defaults to
<span class='lineno'>190</span>     76 characters).  Long lines will have the `soft linefeed&#39; quoted-printable
<span class='lineno'>191</span>     character &quot;=&quot; appended to them, so the decoded text will be identical to
<span class='lineno'>192</span>     the original text.
<span class='lineno'>193</span>     &quot;&quot;&quot;</span>
<span class='lineno'>194</span>     if not <a href='#quoprimime.encode@body', id ='1156272962', onmouseover='highlight("1156272131","1156300002","1156272131","1156300002")', title='{quoprimime.encode@body :: str | quoprimime.encode@body :: ?}'>body</a>:
<span class='lineno'>195</span>         return <a href='#quoprimime.encode@body', id ='1156272899', onmouseover='highlight("1156272131","1156300002","1156272131","1156300002")', title='{quoprimime.encode@body :: str | quoprimime.encode@body :: ?}'>body</a>
<span class='lineno'>196</span> 
<span class='lineno'>197</span>     if not <a href='#quoprimime.encode@binary', id ='1156272840', onmouseover='highlight(1156299996)', title='quoprimime.encode@binary :: ?'>binary</a>:
<span class='lineno'>198</span>         <a name='quoprimime.encode@body', id ='1156272131', onmouseover='highlight("1156272094","1156272962","1156272899","1156268287")', title='quoprimime.encode@body :: ?'><span class='parameter'><a name='quoprimime.encode@body', id ='1156272131', onmouseover='highlight("1156272094","1156272962","1156272899","1156268287")', title='quoprimime.encode@body :: str'><span class='parameter'>body</a></span></span></a> = fix_eols(<a href='#quoprimime.encode@body', id ='1156272094', onmouseover='highlight("1156272131","1156300002","1156272131","1156300002")', title='{quoprimime.encode@body :: str | quoprimime.encode@body :: ?}'>body</a>)
<span class='lineno'>199</span> 
<span class='lineno'>200</span>     # BAW: We&#39;re accumulating the body text by string concatenation.  That
<span class='lineno'>201</span>     # can&#39;t be very efficient, but I don&#39;t have time now to rewrite it.  It
<span class='lineno'>202</span>     # just feels like this algorithm could be more efficient.
<span class='lineno'>203</span>     <a name='quoprimime.encode&encoded_body', id ='1156270085', onmouseover='highlight("1156239207","1156209382","1156235397","1156213261","1156234467","1156209574","1156210412")', title='quoprimime.encode&encoded_body :: str'><span class='identifier'>encoded_body</a></span> = &#39;&#39;
<span class='lineno'>204</span>     <span class='identifier'><a name='quoprimime.encode&lineno', id ='1156270021', onmouseover='highlight("1156210624","1156236507","1156266267","1156210529")', title='quoprimime.encode&lineno :: int'>lineno</a></span> = <span class='number'>-1</span>
<span class='lineno'>205</span>     # Preserve line endings here so we can check later to see an eol needs to
<span class='lineno'>206</span>     # be added to the output later.
<span class='lineno'>207</span>     <span class='identifier'><a name='quoprimime.encode&lines', id ='1156268967', onmouseover='highlight("1156236447","1156210535","1156211302","1156268189")', title='quoprimime.encode&lines :: ?'>lines</span></a> = <a href='#quoprimime.encode@body', id ='1156268287', onmouseover='highlight("1156272131","1156300002")', title='quoprimime.encode@body :: str'>body</a>.<a href='http://docs.python.org/library/stdtypes.html#str.splitlines', id ='1156268282', onmouseover='highlight(1653832554)', title='__builtin__.str.splitlines :: ? -> [str]'>splitlines</a>(<span class='number'>1</span>)
<span class='lineno'>208</span>     for <a name='quoprimime.encode&line', id ='1156268218', onmouseover='highlight("1156266328","1156267079","1156267289","1156267165","1156243239","1156265368")', title='quoprimime.encode&line :: ?'><a name='quoprimime.encode&line', id ='1156268218', onmouseover='highlight("1156266328","1156267079","1156267289","1156267165","1156243239","1156265368")', title='quoprimime.encode&line :: ?'>line</a></a> in <a href='#quoprimime.encode&lines', id ='1156268189', onmouseover='highlight(1156268967)', title='quoprimime.encode&lines :: ?'>lines</a>:
<span class='lineno'>209</span>         # But strip off line-endings for processing this line.
<span class='lineno'>210</span>         if <a href='#quoprimime.encode&line', id ='1156267289', onmouseover='highlight("1156267172","1156268218","1156266335","1156267172","1156268218","1156266335")', title='{quoprimime.encode&line :: ? | quoprimime.encode&line :: ?}'>line</a>.endswith(<a href='#quoprimime.CRLF', id ='1156267233', onmouseover='highlight(1156416994)', title='quoprimime.CRLF :: str'>CRLF</a>):
<span class='lineno'>211</span>             <a name='quoprimime.encode&line', id ='1156267172', onmouseover='highlight("1156266328","1156267079","1156267289","1156267165","1156243239","1156265368")', title='quoprimime.encode&line :: ?'><a name='quoprimime.encode&line', id ='1156267172', onmouseover='highlight("1156266328","1156267079","1156267289","1156267165","1156243239","1156265368")', title='quoprimime.encode&line :: ?'>line</a></a> = <a href='#quoprimime.encode&line', id ='1156267165', onmouseover='highlight("1156267172","1156268218","1156266335","1156267172","1156268218","1156266335")', title='{quoprimime.encode&line :: ? | quoprimime.encode&line :: ?}'>line</a>[:<span class='number'>-2</span>]
<span class='lineno'>212</span>         elif <a href='#quoprimime.encode&line', id ='1156267079', onmouseover='highlight("1156267172","1156268218","1156266335")', title='quoprimime.encode&line :: ?'>line</a>[<span class='number'>-1</span>] in <a href='#quoprimime.CRLF', id ='1156267046', onmouseover='highlight(1156416994)', title='quoprimime.CRLF :: str'>CRLF</a>:
<span class='lineno'>213</span>             <a name='quoprimime.encode&line', id ='1156266335', onmouseover='highlight("1156266328","1156267079","1156267289","1156267165","1156243239","1156265368")', title='quoprimime.encode&line :: ?'><a name='quoprimime.encode&line', id ='1156266335', onmouseover='highlight("1156266328","1156267079","1156267289","1156267165","1156243239","1156265368")', title='quoprimime.encode&line :: ?'>line</a></a> = <a href='#quoprimime.encode&line', id ='1156266328', onmouseover='highlight("1156267172","1156268218","1156266335")', title='quoprimime.encode&line :: ?'>line</a>[:<span class='number'>-1</span>]
<span class='lineno'>214</span> 
<span class='lineno'>215</span>         <a href='#quoprimime.encode&lineno', id ='1156266267', onmouseover='highlight(1156270021)', title='quoprimime.encode&lineno :: int'>lineno</a> += <span class='number'>1</span>
<span class='lineno'>216</span>         <a name='quoprimime.encode&encoded_line', id ='1156266205', onmouseover='highlight("1156209537","1156239366","1156238498","1156213224","1156210375","1156235583","1156238280","1156235360","1156234430","1156241189")', title='quoprimime.encode&encoded_line :: str'><a name='quoprimime.encode&encoded_line', id ='1156266205', onmouseover='highlight("1156209537","1156239366","1156238498","1156213224","1156210375","1156235583","1156238280","1156235360","1156234430","1156241189")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a></a> = &#39;&#39;
<span class='lineno'>217</span>         <a name='quoprimime.encode&prev', id ='1156266116', onmouseover='highlight("1156236326","1156212516","1156234373","1156235521","1156237413","1156237443","1156234619")', title='quoprimime.encode&prev :: str'><a name='quoprimime.encode&prev', id ='1156266116', onmouseover='highlight("1156236326","1156212516","1156234373","1156235521","1156237413","1156237443","1156234619")', title='quoprimime.encode&prev :: ?'>prev</a></a> = <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1156266088', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</span></a>
<span class='lineno'>218</span>         <span class='identifier'><a name='quoprimime.encode&linelen', id ='1156265403', onmouseover='highlight("1156242245","1156264160")', title='quoprimime.encode&linelen :: ?'>linelen</a></span> = <a href='http://docs.python.org/library/functions.html#len', id ='1156265372', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime.encode&line', id ='1156265368', onmouseover='highlight("1156267172","1156268218","1156266335")', title='quoprimime.encode&line :: ?'>line</a>)
<span class='lineno'>219</span>         # Now we need to examine every character to see if it needs to be
<span class='lineno'>220</span>         # quopri encoded.  BAW: again, string concatenation is inefficient.
<span class='lineno'>221</span>         for <a name='quoprimime.encode&j', id ='1156264192', onmouseover='highlight("1156243234","1156242273")', title='quoprimime.encode&j :: ?'>j</a> in <a href='http://docs.python.org/library/functions.html#range', id ='1156264166', onmouseover='highlight(1410999180)', title='__builtin__.range :: ? -> [int]'>range</a>(<a href='#quoprimime.encode&linelen', id ='1156264160', onmouseover='highlight(1156265403)', title='quoprimime.encode&linelen :: ?'>linelen</a>):
<span class='lineno'>222</span>             <a name='quoprimime.encode&c', id ='1156243264', onmouseover='highlight("1156239304","1156240413","1156243079","1156243170","1156242335","1156241288","1156238243","1156241131")', title='quoprimime.encode&c :: ?'><a name='quoprimime.encode&c', id ='1156243264', onmouseover='highlight("1156239304","1156240413","1156243079","1156243170","1156242335","1156241288","1156238243","1156241131")', title='quoprimime.encode&c :: str'>c</a></a> = <a href='#quoprimime.encode&line', id ='1156243239', onmouseover='highlight("1156267172","1156268218","1156266335")', title='quoprimime.encode&line :: ?'>line</a>[<a href='#quoprimime.encode&j', id ='1156243234', onmouseover='highlight(1156264192)', title='quoprimime.encode&j :: ?'>j</a>]
<span class='lineno'>223</span>             <span class='identifier'><a name='quoprimime.encode&prev', id ='1156243177', onmouseover='highlight("1156236326","1156212516","1156234373","1156235521","1156237413","1156237443","1156234619")', title='quoprimime.encode&prev :: str'><a name='quoprimime.encode&prev', id ='1156243177', onmouseover='highlight("1156236326","1156212516","1156234373","1156235521","1156237413","1156237443","1156234619")', title='quoprimime.encode&prev :: ?'><span class='identifier'>prev</a></a></span></span> = <a href='#quoprimime.encode&c', id ='1156243170', onmouseover='highlight("1156243017","1156243264","1156243017","1156243264")', title='{quoprimime.encode&c :: str | quoprimime.encode&c :: ?}'>c</a>
<span class='lineno'>224</span>             if <a href='#quoprimime.bqre', id ='1156243111', onmouseover='highlight(1156416031)', title='quoprimime.bqre :: ?'>bqre</a>.match(<a href='#quoprimime.encode&c', id ='1156243079', onmouseover='highlight("1156243017","1156243264","1156243017","1156243264")', title='{quoprimime.encode&c :: str | quoprimime.encode&c :: ?}'>c</a>):
<span class='lineno'>225</span>                 <a name='quoprimime.encode&c', id ='1156243017', onmouseover='highlight("1156239304","1156240413","1156243079","1156243170","1156242335","1156241288","1156238243","1156241131")', title='quoprimime.encode&c :: ?'><span class='identifier'><a name='quoprimime.encode&c', id ='1156243017', onmouseover='highlight("1156239304","1156240413","1156243079","1156243170","1156242335","1156241288","1156238243","1156241131")', title='quoprimime.encode&c :: str'><span class='identifier'>c</span></span></a></a> = <a href='#quoprimime.quote', id ='1156242341', onmouseover='highlight(1156384570)', title='quoprimime.quote :: str -> str'>quote</a>(<a href='#quoprimime.encode&c', id ='1156242335', onmouseover='highlight("1156243017","1156243264","1156243017","1156243264")', title='{quoprimime.encode&c :: str | quoprimime.encode&c :: ?}'>c</a>)
<span class='lineno'>226</span>             elif <a href='#quoprimime.encode&j', id ='1156242273', onmouseover='highlight(1156264192)', title='quoprimime.encode&j :: ?'>j</a>+<span class='number'>1</span> == <a href='#quoprimime.encode&linelen', id ='1156242245', onmouseover='highlight(1156265403)', title='quoprimime.encode&linelen :: ?'>linelen</a>:
<span class='lineno'>227</span>                 # Check for whitespace at end of line; special case
<span class='lineno'>228</span>                 if <a href='#quoprimime.encode&c', id ='1156241288', onmouseover='highlight("1156243017","1156243264")', title='quoprimime.encode&c :: str'>c</a> not in &#39; \t&#39;:
<span class='lineno'>229</span>                     <a href='#quoprimime.encode&encoded_line', id ='1156241189', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474","1156238373","1156266205","1156212424","1156209474")', title='{quoprimime.encode&encoded_line :: str | quoprimime.encode&encoded_line :: str}'>encoded_line</a> += <a href='#quoprimime.encode&c', id ='1156241131', onmouseover='highlight("1156243017","1156243264")', title='quoprimime.encode&c :: str'>c</a>
<span class='lineno'>230</span>                 <a name='quoprimime.encode&prev', id ='1156240420', onmouseover='highlight("1156236326","1156212516","1156234373","1156235521","1156237413","1156237443","1156234619")', title='quoprimime.encode&prev :: ?'><a name='quoprimime.encode&prev', id ='1156240420', onmouseover='highlight("1156236326","1156212516","1156234373","1156235521","1156237413","1156237443","1156234619")', title='quoprimime.encode&prev :: str'>prev</a></a> = <a href='#quoprimime.encode&c', id ='1156240413', onmouseover='highlight("1156243017","1156243264")', title='quoprimime.encode&c :: str'>c</a>
<span class='lineno'>231</span>                 continue
<span class='lineno'>232</span>             # Check to see to see if the line has reached its maximum length
<span class='lineno'>233</span>             if <a href='http://docs.python.org/library/functions.html#len', id ='1156239391', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime.encode&encoded_line', id ='1156239366', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474","1156238373","1156266205","1156212424","1156209474")', title='{quoprimime.encode&encoded_line :: str | quoprimime.encode&encoded_line :: str}'>encoded_line</a>) + <a href='http://docs.python.org/library/functions.html#len', id ='1156239329', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime.encode&c', id ='1156239304', onmouseover='highlight("1156243017","1156243264")', title='quoprimime.encode&c :: str'>c</a>) &gt;= <a href='#quoprimime.encode@maxlinelen', id ='1156239298', onmouseover='highlight(1156299940)', title='quoprimime.encode@maxlinelen :: int'>maxlinelen</a>:
<span class='lineno'>234</span>                 <a href='#quoprimime.encode&encoded_body', id ='1156239207', onmouseover='highlight(1156270085)', title='quoprimime.encode&encoded_body :: str'>encoded_body</a> += <a href='#quoprimime.encode&encoded_line', id ='1156238498', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474","1156238373","1156266205","1156212424","1156209474")', title='{quoprimime.encode&encoded_line :: str | quoprimime.encode&encoded_line :: str}'>encoded_line</a> + &#39;=&#39; + <a href='#quoprimime.encode@eol', id ='1156238435', onmouseover='highlight(1156299904)', title='quoprimime.encode@eol :: str'>eol</a>
<span class='lineno'>235</span>                 <span class='identifier'><a name='quoprimime.encode&encoded_line', id ='1156238373', onmouseover='highlight("1156209537","1156239366","1156238498","1156213224","1156210375","1156235583","1156238280","1156235360","1156234430","1156241189")', title='quoprimime.encode&encoded_line :: str'><span class='identifier'><a name='quoprimime.encode&encoded_line', id ='1156238373', onmouseover='highlight("1156209537","1156239366","1156238498","1156213224","1156210375","1156235583","1156238280","1156235360","1156234430","1156241189")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a></span></a></span> = &#39;&#39;
<span class='lineno'>236</span>             <a href='#quoprimime.encode&encoded_line', id ='1156238280', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a> += <a href='#quoprimime.encode&c', id ='1156238243', onmouseover='highlight("1156243017","1156243264")', title='quoprimime.encode&c :: str'>c</a>
<span class='lineno'>237</span>         # Now at end of line..
<span class='lineno'>238</span>         if <a href='#quoprimime.encode&prev', id ='1156237443', onmouseover='highlight("1156243177","1156240420","1156266116","1156236381")', title='quoprimime.encode&prev :: str'>prev</a> and <a href='#quoprimime.encode&prev', id ='1156237413', onmouseover='highlight("1156243177","1156240420","1156266116","1156236381")', title='quoprimime.encode&prev :: str'>prev</a> in &#39; \t&#39;:
<span class='lineno'>239</span>             # Special case for whitespace at end of file
<span class='lineno'>240</span>             if <a href='#quoprimime.encode&lineno', id ='1156236507', onmouseover='highlight(1156270021)', title='quoprimime.encode&lineno :: int'>lineno</a> + <span class='number'>1</span> == <a href='http://docs.python.org/library/functions.html#len', id ='1156236451', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime.encode&lines', id ='1156236447', onmouseover='highlight(1156268967)', title='quoprimime.encode&lines :: ?'>lines</a>):
<span class='lineno'>241</span>                 <a name='quoprimime.encode&prev', id ='1156236381', onmouseover='highlight("1156236326","1156212516","1156234373","1156235521","1156237413","1156237443","1156234619")', title='quoprimime.encode&prev :: ?'><a name='quoprimime.encode&prev', id ='1156236381', onmouseover='highlight("1156236326","1156212516","1156234373","1156235521","1156237413","1156237443","1156234619")', title='quoprimime.encode&prev :: str'>prev</a></a> = <a href='#quoprimime.quote', id ='1156236353', onmouseover='highlight(1156384570)', title='quoprimime.quote :: str -> str'>quote</a>(<a href='#quoprimime.encode&prev', id ='1156236326', onmouseover='highlight("1156243177","1156240420","1156266116","1156236381")', title='quoprimime.encode&prev :: str'>prev</a>)
<span class='lineno'>242</span>                 if <a href='http://docs.python.org/library/functions.html#len', id ='1156235608', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime.encode&encoded_line', id ='1156235583', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a>) + <a href='http://docs.python.org/library/functions.html#len', id ='1156235546', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime.encode&prev', id ='1156235521', onmouseover='highlight("1156243177","1156240420","1156266116","1156236381")', title='quoprimime.encode&prev :: str'>prev</a>) &gt; <a href='#quoprimime.encode@maxlinelen', id ='1156235513', onmouseover='highlight(1156299940)', title='quoprimime.encode@maxlinelen :: int'>maxlinelen</a>:
<span class='lineno'>243</span>                     <a href='#quoprimime.encode&encoded_body', id ='1156235397', onmouseover='highlight(1156270085)', title='quoprimime.encode&encoded_body :: str'>encoded_body</a> += <a href='#quoprimime.encode&encoded_line', id ='1156235360', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a> + &#39;=&#39; + <a href='#quoprimime.encode@eol', id ='1156234646', onmouseover='highlight(1156299904)', title='quoprimime.encode@eol :: str'>eol</a> + <a href='#quoprimime.encode&prev', id ='1156234619', onmouseover='highlight("1156243177","1156240420","1156266116","1156236381")', title='quoprimime.encode&prev :: str'>prev</a>
<span class='lineno'>244</span>                 else:
<span class='lineno'>245</span>                     <a href='#quoprimime.encode&encoded_body', id ='1156234467', onmouseover='highlight(1156270085)', title='quoprimime.encode&encoded_body :: str'>encoded_body</a> += <a href='#quoprimime.encode&encoded_line', id ='1156234430', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a> + <a href='#quoprimime.encode&prev', id ='1156234373', onmouseover='highlight("1156243177","1156240420","1156266116","1156236381")', title='quoprimime.encode&prev :: str'>prev</a>
<span class='lineno'>246</span>             # Just normal whitespace at end of line
<span class='lineno'>247</span>             else:
<span class='lineno'>248</span>                 <a href='#quoprimime.encode&encoded_body', id ='1156213261', onmouseover='highlight(1156270085)', title='quoprimime.encode&encoded_body :: str'>encoded_body</a> += <a href='#quoprimime.encode&encoded_line', id ='1156213224', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a> + <a href='#quoprimime.encode&prev', id ='1156212516', onmouseover='highlight("1156243177","1156240420","1156266116","1156236381")', title='quoprimime.encode&prev :: str'>prev</a> + &#39;=&#39; + <a href='#quoprimime.encode@eol', id ='1156212482', onmouseover='highlight(1156299904)', title='quoprimime.encode@eol :: str'>eol</a>
<span class='lineno'>249</span>             <a name='quoprimime.encode&encoded_line', id ='1156212424', onmouseover='highlight("1156209537","1156239366","1156238498","1156213224","1156210375","1156235583","1156238280","1156235360","1156234430","1156241189")', title='quoprimime.encode&encoded_line :: str'><a name='quoprimime.encode&encoded_line', id ='1156212424', onmouseover='highlight("1156209537","1156239366","1156238498","1156213224","1156210375","1156235583","1156238280","1156235360","1156234430","1156241189")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a></a> = &#39;&#39;
<span class='lineno'>250</span>         # Now look at the line we just finished and it has a line ending, we
<span class='lineno'>251</span>         # need to add eol to the end of the line.
<span class='lineno'>252</span>         if <a href='#quoprimime.encode&lines', id ='1156211302', onmouseover='highlight(1156268967)', title='quoprimime.encode&lines :: ?'>lines</a>[<a href='#quoprimime.encode&lineno', id ='1156210624', onmouseover='highlight(1156270021)', title='quoprimime.encode&lineno :: int'>lineno</a>].endswith(<a href='#quoprimime.CRLF', id ='1156210565', onmouseover='highlight(1156416994)', title='quoprimime.CRLF :: str'>CRLF</a>) or <a href='#quoprimime.encode&lines', id ='1156210535', onmouseover='highlight(1156268967)', title='quoprimime.encode&lines :: ?'>lines</a>[<a href='#quoprimime.encode&lineno', id ='1156210529', onmouseover='highlight(1156270021)', title='quoprimime.encode&lineno :: int'>lineno</a>][<span class='number'>-1</span>] in <a href='#quoprimime.CRLF', id ='1156210472', onmouseover='highlight(1156416994)', title='quoprimime.CRLF :: str'>CRLF</a>:
<span class='lineno'>253</span>             <a href='#quoprimime.encode&encoded_body', id ='1156210412', onmouseover='highlight(1156270085)', title='quoprimime.encode&encoded_body :: str'>encoded_body</a> += <a href='#quoprimime.encode&encoded_line', id ='1156210375', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474","1156238373","1156266205","1156212424","1156209474")', title='{quoprimime.encode&encoded_line :: str | quoprimime.encode&encoded_line :: str}'>encoded_line</a> + <a href='#quoprimime.encode@eol', id ='1156209667', onmouseover='highlight(1156299904)', title='quoprimime.encode@eol :: str'>eol</a>
<span class='lineno'>254</span>         else:
<span class='lineno'>255</span>             <a href='#quoprimime.encode&encoded_body', id ='1156209574', onmouseover='highlight(1156270085)', title='quoprimime.encode&encoded_body :: str'>encoded_body</a> += <a href='#quoprimime.encode&encoded_line', id ='1156209537', onmouseover='highlight("1156238373","1156266205","1156212424","1156209474","1156238373","1156266205","1156212424","1156209474")', title='{quoprimime.encode&encoded_line :: str | quoprimime.encode&encoded_line :: str}'>encoded_line</a>
<span class='lineno'>256</span>         <a name='quoprimime.encode&encoded_line', id ='1156209474', onmouseover='highlight("1156209537","1156239366","1156238498","1156213224","1156210375","1156235583","1156238280","1156235360","1156234430","1156241189")', title='quoprimime.encode&encoded_line :: str'><a name='quoprimime.encode&encoded_line', id ='1156209474', onmouseover='highlight("1156209537","1156239366","1156238498","1156213224","1156210375","1156235583","1156238280","1156235360","1156234430","1156241189")', title='quoprimime.encode&encoded_line :: str'>encoded_line</a></a> = &#39;&#39;
<span class='lineno'>257</span>     return <a href='#quoprimime.encode&encoded_body', id ='1156209382', onmouseover='highlight(1156270085)', title='quoprimime.encode&encoded_body :: str'>encoded_body</a>
<span class='lineno'>258</span> 
<span class='lineno'>259</span> 
<span class='lineno'>260</span> # For convenience and backwards compatibility w/ standard base64 module
<span class='lineno'>261</span> <a name='quoprimime.body_encode', id ='1156208455', onmouseover='highlight(841847453)', title='quoprimime.body_encode :: (str, ?, int, str) -> str'>body_encode</a> = <a href='#quoprimime.encode', id ='1156208420', onmouseover='highlight(1156300681)', title='quoprimime.encode :: (str, ?, int, str) -> str'>encode</a>
<span class='lineno'>262</span> <a name='quoprimime.encodestring', id ='1156207741', title='quoprimime.encodestring :: (str, ?, int, str) -> str'>encodestring</a> = <a href='#quoprimime.encode', id ='1156207684', onmouseover='highlight(1156300681)', title='quoprimime.encode :: (str, ?, int, str) -> str'>encode</a>
<span class='lineno'>263</span> 
<span class='lineno'>264</span> 
<span class='lineno'>265</span> 
<span class='lineno'>266</span> # BAW: I&#39;m not sure if the intent was for the signature of this function to be
<span class='lineno'>267</span> # the same as base64MIME.decode() or not...
<span class='lineno'>268</span> def <a name='quoprimime.decode', id ='1156206622', onmouseover='highlight("1489343026","1489343111")', title='quoprimime.decode :: (?, str) -> str'><span class='function'>decode</span></a>(<a name='quoprimime.decode@encoded', id ='1156206594', onmouseover='highlight("1156204862","1489344978","1156204796","1156182661")', title='quoprimime.decode@encoded :: ?'><span class='parameter'>encoded</span></a>, <span class='parameter'><a name='quoprimime.decode@eol', id ='1156206564', onmouseover='highlight("1489344851","1489344940","1156181705","1156174879")', title='quoprimime.decode@eol :: str'>eol</span></a>=<a href='#quoprimime.NL', id ='1156206560', onmouseover='highlight(1156416959)', title='quoprimime.NL :: str'>NL</a>):
<span class='lineno'>269</span>     <span class='doc-string'>&quot;&quot;&quot;Decode a quoted-printable string.
<span class='lineno'>270</span> 
<span class='lineno'>271</span>     Lines are separated with eol, which defaults to \\n.
<span class='lineno'>272</span>     &quot;&quot;&quot;</span>
<span class='lineno'>273</span>     if not <a href='#quoprimime.decode@encoded', id ='1156204862', onmouseover='highlight(1156206594)', title='quoprimime.decode@encoded :: ?'>encoded</a>:
<span class='lineno'>274</span>         return <a href='#quoprimime.decode@encoded', id ='1156204796', onmouseover='highlight(1156206594)', title='quoprimime.decode@encoded :: ?'>encoded</a>
<span class='lineno'>275</span>     # BAW: see comment in encode() above.  Again, we&#39;re building up the
<span class='lineno'>276</span>     # decoded string with string concatenation, which could be done much more
<span class='lineno'>277</span>     # efficiently.
<span class='lineno'>278</span>     <a name='quoprimime.decode&decoded', id ='1156182754', onmouseover='highlight("1156174911","1489344910","1489344047","1489344134","1156180612","1156175785","1156176897","1156181737")', title='quoprimime.decode&decoded :: str'><span class='identifier'>decoded</a></span> = &#39;&#39;
<span class='lineno'>279</span> 
<span class='lineno'>280</span>     for <a name='quoprimime.decode&line', id ='1156182690', onmouseover='highlight("1156182540","1156180745","1156176836","1156177672","1156177762","1156181544","1156181797")', title='quoprimime.decode&line :: ?'>line</a> in <a href='#quoprimime.decode@encoded', id ='1156182661', onmouseover='highlight(1156206594)', title='quoprimime.decode@encoded :: ?'>encoded</a>.splitlines():
<span class='lineno'>281</span>         <a name='quoprimime.decode&line', id ='1156182568', onmouseover='highlight("1156182540","1156180745","1156176836","1156177672","1156177762","1156181544","1156181797")', title='quoprimime.decode&line :: ?'>line</a> = <a href='#quoprimime.decode&line', id ='1156182540', onmouseover='highlight("1156182690","1156182568")', title='quoprimime.decode&line :: ?'>line</a>.rstrip()
<span class='lineno'>282</span>         if not <a href='#quoprimime.decode&line', id ='1156181797', onmouseover='highlight("1156182690","1156182568")', title='quoprimime.decode&line :: ?'>line</a>:
<span class='lineno'>283</span>             <a href='#quoprimime.decode&decoded', id ='1156181737', onmouseover='highlight("1156182754","1489344816")', title='quoprimime.decode&decoded :: str'>decoded</a> += <a href='#quoprimime.decode@eol', id ='1156181705', onmouseover='highlight(1156206564)', title='quoprimime.decode@eol :: str'>eol</a>
<span class='lineno'>284</span>             continue
<span class='lineno'>285</span> 
<span class='lineno'>286</span>         <span class='identifier'><a name='quoprimime.decode&i', id ='1156181608', onmouseover='highlight("1156177795","1156180740","1156176744","1156178788","1156174977","1156175063","1156176831","1156177667","1156177736","1156180831","1156178699","1156179869","1156176808")', title='quoprimime.decode&i :: int'>i</a></span> = <span class='number'>0</span>
<span class='lineno'>287</span>         <span class='identifier'><a name='quoprimime.decode&n', id ='1156181573', onmouseover='highlight("1156174972","1156180806","1156178760","1156177768")', title='quoprimime.decode&n :: ?'>n</a></span> = <a href='http://docs.python.org/library/functions.html#len', id ='1156181548', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='#quoprimime.decode&line', id ='1156181544', onmouseover='highlight("1156182690","1156182568")', title='quoprimime.decode&line :: ?'>line</a>)
<span class='lineno'>288</span>         while <a href='#quoprimime.decode&i', id ='1156180831', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a> &lt; <a href='#quoprimime.decode&n', id ='1156180806', onmouseover='highlight(1156181573)', title='quoprimime.decode&n :: ?'>n</a>:
<span class='lineno'>289</span>             <a name='quoprimime.decode&c', id ='1156180770', onmouseover='highlight("1156180680","1156180559","1156175753")', title='quoprimime.decode&c :: ?'><span class='identifier'>c</a></span> = <a href='#quoprimime.decode&line', id ='1156180745', onmouseover='highlight("1156182690","1156182568")', title='quoprimime.decode&line :: ?'>line</a>[<a href='#quoprimime.decode&i', id ='1156180740', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a>]
<span class='lineno'>290</span>             if <a href='#quoprimime.decode&c', id ='1156180680', onmouseover='highlight(1156180770)', title='quoprimime.decode&c :: ?'>c</a> != &#39;=&#39;:
<span class='lineno'>291</span>                 <a href='#quoprimime.decode&decoded', id ='1156180612', onmouseover='highlight("1156182754","1489344816")', title='quoprimime.decode&decoded :: str'>decoded</a> += <a href='#quoprimime.decode&c', id ='1156180559', onmouseover='highlight(1156180770)', title='quoprimime.decode&c :: ?'>c</a>
<span class='lineno'>292</span>                 <a href='#quoprimime.decode&i', id ='1156179869', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a> += <span class='number'>1</span>
<span class='lineno'>293</span>             # Otherwise, c == &quot;=&quot;.  Are we at the end of the line?  If so, add
<span class='lineno'>294</span>             # a soft line break.
<span class='lineno'>295</span>             elif <a href='#quoprimime.decode&i', id ='1156178788', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a>+<span class='number'>1</span> == <a href='#quoprimime.decode&n', id ='1156178760', onmouseover='highlight(1156181573)', title='quoprimime.decode&n :: ?'>n</a>:
<span class='lineno'>296</span>                 <a href='#quoprimime.decode&i', id ='1156178699', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a> += <span class='number'>1</span>
<span class='lineno'>297</span>                 continue
<span class='lineno'>298</span>             # Decode if in form =AB
<span class='lineno'>299</span>             elif <a href='#quoprimime.decode&i', id ='1156177795', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a>+<span class='number'>2</span> &lt; <a href='#quoprimime.decode&n', id ='1156177768', onmouseover='highlight(1156181573)', title='quoprimime.decode&n :: ?'>n</a> and <a href='#quoprimime.decode&line', id ='1156177762', onmouseover='highlight("1156182690","1156182568")', title='quoprimime.decode&line :: ?'>line</a>[<a href='#quoprimime.decode&i', id ='1156177736', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a>+<span class='number'>1</span>] in hexdigits and <a href='#quoprimime.decode&line', id ='1156177672', onmouseover='highlight("1156182690","1156182568")', title='quoprimime.decode&line :: ?'>line</a>[<a href='#quoprimime.decode&i', id ='1156177667', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a>+<span class='number'>2</span>] in hexdigits:
<span class='lineno'>300</span>                 <a href='#quoprimime.decode&decoded', id ='1156176897', onmouseover='highlight("1156182754","1489344816")', title='quoprimime.decode&decoded :: str'>decoded</a> += <a href='#quoprimime.unquote', id ='1156176865', onmouseover='highlight(1156386274)', title='quoprimime.unquote :: ? -> ?'>unquote</a>(<a href='#quoprimime.decode&line', id ='1156176836', onmouseover='highlight("1156182690","1156182568")', title='quoprimime.decode&line :: ?'>line</a>[<a href='#quoprimime.decode&i', id ='1156176831', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a>:<a href='#quoprimime.decode&i', id ='1156176808', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a>+<span class='number'>3</span>])
<span class='lineno'>301</span>                 <a href='#quoprimime.decode&i', id ='1156176744', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a> += <span class='number'>3</span>
<span class='lineno'>302</span>             # Otherwise, not in form =AB, pass literally
<span class='lineno'>303</span>             else:
<span class='lineno'>304</span>                 <a href='#quoprimime.decode&decoded', id ='1156175785', onmouseover='highlight("1156182754","1489344816")', title='quoprimime.decode&decoded :: str'>decoded</a> += <a href='#quoprimime.decode&c', id ='1156175753', onmouseover='highlight(1156180770)', title='quoprimime.decode&c :: ?'>c</a>
<span class='lineno'>305</span>                 <a href='#quoprimime.decode&i', id ='1156175063', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a> += <span class='number'>1</span>
<span class='lineno'>306</span> 
<span class='lineno'>307</span>             if <a href='#quoprimime.decode&i', id ='1156174977', onmouseover='highlight(1156181608)', title='quoprimime.decode&i :: int'>i</a> == <a href='#quoprimime.decode&n', id ='1156174972', onmouseover='highlight(1156181573)', title='quoprimime.decode&n :: ?'>n</a>:
<span class='lineno'>308</span>                 <a href='#quoprimime.decode&decoded', id ='1156174911', onmouseover='highlight("1156182754","1489344816")', title='quoprimime.decode&decoded :: str'>decoded</a> += <a href='#quoprimime.decode@eol', id ='1156174879', onmouseover='highlight(1156206564)', title='quoprimime.decode@eol :: str'>eol</a>
<span class='lineno'>309</span>     # Special case if original string did not end with eol
<span class='lineno'>310</span>     if not <a href='#quoprimime.decode@encoded', id ='1489344978', onmouseover='highlight(1156206594)', title='quoprimime.decode@encoded :: ?'>encoded</a>.endswith(<a href='#quoprimime.decode@eol', id ='1489344940', onmouseover='highlight(1156206564)', title='quoprimime.decode@eol :: str'>eol</a>) and <a href='#quoprimime.decode&decoded', id ='1489344910', onmouseover='highlight("1156182754","1489344816")', title='quoprimime.decode&decoded :: str'>decoded</a>.<a href='http://docs.python.org/library/stdtypes.html#str.endswith', id ='1489344881', onmouseover='highlight(496724689)', title='__builtin__.str.endswith :: ? -> int'>endswith</a>(<a href='#quoprimime.decode@eol', id ='1489344851', onmouseover='highlight(1156206564)', title='quoprimime.decode@eol :: str'>eol</a>):
<span class='lineno'>311</span>         <a name='quoprimime.decode&decoded', id ='1489344816', onmouseover='highlight("1156174911","1489344910","1489344047","1489344134","1156180612","1156175785","1156176897","1156181737")', title='quoprimime.decode&decoded :: str'>decoded</a> = <a href='#quoprimime.decode&decoded', id ='1489344134', onmouseover='highlight("1156182754","1489344816")', title='quoprimime.decode&decoded :: str'>decoded</a>[:<span class='number'>-1</span>]
<span class='lineno'>312</span>     return <a href='#quoprimime.decode&decoded', id ='1489344047', onmouseover='highlight("1156182754","1489344816")', title='quoprimime.decode&decoded :: str'>decoded</a>
<span class='lineno'>313</span> 
<span class='lineno'>314</span> 
<span class='lineno'>315</span> # For convenience and backwards compatibility w/ standard base64 module
<span class='lineno'>316</span> <a name='quoprimime.body_decode', id ='1489343146', title='quoprimime.body_decode :: (?, str) -> str'>body_decode</a> = <a href='#quoprimime.decode', id ='1489343111', onmouseover='highlight(1156206622)', title='quoprimime.decode :: (?, str) -> str'>decode</a>
<span class='lineno'>317</span> <a name='quoprimime.decodestring', id ='1489343083', title='quoprimime.decodestring :: (?, str) -> str'>decodestring</a> = <a href='#quoprimime.decode', id ='1489343026', onmouseover='highlight(1156206622)', title='quoprimime.decode :: (?, str) -> str'>decode</a>
<span class='lineno'>318</span> 
<span class='lineno'>319</span> 
<span class='lineno'>320</span> 
<span class='lineno'>321</span> def <a name='quoprimime._unquote_match', id ='1489342990', onmouseover='highlight(1489337344)', title='quoprimime._unquote_match :: ? -> ?'><span class='function'>_unquote_match</span></a>(<a name='quoprimime._unquote_match@match', id ='1489342933', onmouseover='highlight(1489341999)', title='quoprimime._unquote_match@match :: ?'><span class='parameter'>match</span></a>):
<span class='lineno'>322</span>     <span class='doc-string'>&quot;&quot;&quot;Turn a match in the form =AB to the ASCII character with value 0xab&quot;&quot;&quot;</span>
<span class='lineno'>323</span>     <a name='quoprimime._unquote_match&s', id ='1489342003', onmouseover='highlight(1489341251)', title='quoprimime._unquote_match&s :: ?'><span class='identifier'>s</a></span> = <a href='#quoprimime._unquote_match@match', id ='1489341999', onmouseover='highlight(1489342933)', title='quoprimime._unquote_match@match :: ?'>match</a>.group(<span class='number'>0</span>)
<span class='lineno'>324</span>     return <a href='#quoprimime.unquote', id ='1489341259', onmouseover='highlight(1156386274)', title='quoprimime.unquote :: ? -> ?'>unquote</a>(<a href='#quoprimime._unquote_match&s', id ='1489341251', onmouseover='highlight(1489342003)', title='quoprimime._unquote_match&s :: ?'>s</a>)
<span class='lineno'>325</span> 
<span class='lineno'>326</span> 
<span class='lineno'>327</span> # Header decoding is done a bit differently
<span class='lineno'>328</span> def <span class='function'><a name='quoprimime.header_decode', id ='1489341072', onmouseover='highlight(1312954115)', title='quoprimime.header_decode :: ? -> ?'>header_decode</a></span>(<a name='quoprimime.header_decode@s', id ='1489341037', onmouseover='highlight("1489337286","1489338158")', title='quoprimime.header_decode@s :: ?'><span class='parameter'><a name='quoprimime.header_decode@s', id ='1489341037', title='quoprimime.header_decode@s :: ?'>s</a></span></a>):
<span class='lineno'>329</span>     <span class='doc-string'>&quot;&quot;&quot;Decode a string encoded with RFC 2045 MIME header `Q&#39; encoding.
<span class='lineno'>330</span> 
<span class='lineno'>331</span>     This function does not parse a full MIME header value encoded with
<span class='lineno'>332</span>     quoted-printable (like =?iso-8895-1?q?Hello_World?=) -- please use
<span class='lineno'>333</span>     the high level email.header class for that functionality.
<span class='lineno'>334</span>     &quot;&quot;&quot;</span>
<span class='lineno'>335</span>     <a name='quoprimime.header_decode@s', id ='1489338183', onmouseover='highlight("1489337286","1489338158")', title='quoprimime.header_decode@s :: ?'><span class='parameter'>s</a></span> = <a href='#quoprimime.header_decode@s', id ='1489338158', onmouseover='highlight("1489338183","1489341037")', title='quoprimime.header_decode@s :: ?'>s</a>.replace(&#39;_&#39;, &#39; &#39;)
<span class='lineno'>336</span>     return <a href='../re.py.html#re', id ='1489337413', onmouseover='highlight(147957193)', title='re :: re'>re</a>.<a href='../re.py.html#re.sub', id ='1489337410', onmouseover='highlight(2025540119)', title='re.sub :: (str, str, str, int, int) -> ? | (str, ? -> ?, ?, int, int) -> ? | (str, ? -> ?, ?, int, int) -> ? | (str, ? -> ?, ?, int, int) -> ? | (str, (ReTests, ?) -> ?, str, int, int) -> ? | (str, ? -> str, str, int, int) -> ? | (str, ? -> str, str, int, int) -> ? | (str, ? -> {str | None}, ?, int, int) -> ? | (str, ? -> ?, ?, int, int) -> ? | (str, (?, ?) -> ?, ?, int, int) -> ?'>sub</a>(r&#39;=[a-fA-F0-9]{2}&#39;, <a href='#quoprimime._unquote_match', id ='1489337344', onmouseover='highlight(1489342990)', title='quoprimime._unquote_match :: ? -> ?'>_unquote_match</a>, <a href='#quoprimime.header_decode@s', id ='1489337286', onmouseover='highlight("1489338183","1489341037")', title='quoprimime.header_decode@s :: ?'>s</a>)
</pre></td></tr></table></body></html>