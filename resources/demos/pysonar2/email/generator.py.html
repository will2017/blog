<html><head title="/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/email/generator.py"><style type='text/css'>
body { color: #666666; } 
a {text-decoration: none; color: #5A82F7}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #aaaaaa;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px dotted orange;}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted = new Array();
function highlight()
{
    // clear existing highlights
    for (var i = 0; i < highlighted.length; i++) {
        var elm = document.getElementById(highlighted[i]);
        if (elm != null) {
            elm.style.backgroundColor = 'white';
        }
    }
    highlighted = new Array();
    for (var i = 0; i < arguments.length; i++) {
        var elm = document.getElementById(arguments[i]);
        if (elm != null) {
            elm.style.backgroundColor='gold';
        }
        highlighted.push(arguments[i]);
    }
} </script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#random', onmouseover='highlight("random")'>random</a></li><li><a href='#generator.__all__', onmouseover='highlight("generator___all__")'><span class='identifier'>__all__</span></a></li><li><a href='#generator.UNDERSCORE', onmouseover='highlight("generator_UNDERSCORE")'><span class='identifier'>UNDERSCORE</span></a></li><li><a href='#generator.NL', onmouseover='highlight("generator_NL")'><span class='identifier'>NL</span></a></li><li><a href='#generator.fcre', onmouseover='highlight("generator_fcre")'><span class='identifier'>fcre</span></a></li><li><a href='#generator._is8bitstring', onmouseover='highlight("generator__is8bitstring")'><span class='function'>_is8bitstring</span></a></li><li><a href='#generator.Generator', onmouseover='highlight("generator_Generator")'><span class='type-name'>Generator</span></a><ul>
<li><a href='#generator.Generator.__init__', onmouseover='highlight("generator_Generator___init__")'><span class='function'>__init__</span></a></li><li><a href='#generator.Generator.write', onmouseover='highlight("generator_Generator_write")'><span class='function'>write</span></a></li><li><a href='#generator.Generator.flatten', onmouseover='highlight("generator_Generator_flatten")'><span class='function'>flatten</span></a></li><li><a href='#generator.Generator.clone', onmouseover='highlight("generator_Generator_clone")'><span class='function'>clone</span></a></li><li><a href='#generator.Generator._write', onmouseover='highlight("generator_Generator__write")'><span class='function'>_write</span></a></li><li><a href='#generator.Generator._dispatch', onmouseover='highlight("generator_Generator__dispatch")'><span class='function'>_dispatch</span></a></li><li><a href='#generator.Generator._write_headers', onmouseover='highlight("generator_Generator__write_headers")'><span class='function'>_write_headers</span></a></li><li><a href='#generator.Generator._handle_text', onmouseover='highlight("generator_Generator__handle_text")'><span class='function'>_handle_text</span></a></li><li><a href='#generator.Generator._writeBody', onmouseover='highlight("generator_Generator__writeBody")'><span class='identifier'>_writeBody</span></a></li><li><a href='#generator.Generator._handle_multipart', onmouseover='highlight("generator_Generator__handle_multipart")'><span class='function'>_handle_multipart</span></a></li><li><a href='#generator.Generator._handle_multipart_signed', onmouseover='highlight("generator_Generator__handle_multipart_signed")'><span class='function'>_handle_multipart_signed</span></a></li><li><a href='#generator.Generator._handle_message_delivery_status', onmouseover='highlight("generator_Generator__handle_message_delivery_status")'><span class='function'>_handle_message_delivery_status</span></a></li><li><a href='#generator.Generator._handle_message', onmouseover='highlight("generator_Generator__handle_message")'><span class='function'>_handle_message</span></a></li></ul>
</li><li><a href='#generator._FMT', onmouseover='highlight("generator__FMT")'><span class='identifier'>_FMT</span></a></li><li><a href='#generator.DecodedGenerator', onmouseover='highlight("generator_DecodedGenerator")'><span class='type-name'>DecodedGenerator</span></a><ul>
<li><a href='#generator.DecodedGenerator.__init__', onmouseover='highlight("generator_DecodedGenerator___init__")'><span class='function'>__init__</span></a></li><li><a href='#generator.DecodedGenerator._dispatch', onmouseover='highlight("generator_DecodedGenerator__dispatch")'><span class='function'>_dispatch</span></a></li></ul>
</li><li><a href='#generator._width', onmouseover='highlight("generator__width")'><span class='identifier'>_width</span></a></li><li><a href='#generator._fmt', onmouseover='highlight("generator__fmt")'><span class='identifier'>_fmt</span></a></li><li><a href='#generator._make_boundary', onmouseover='highlight("generator__make_boundary")'><span class='function'>_make_boundary</span></a></li></ul>
</td><td><pre><span class='lineno'>1</span> # Copyr<a href='../re.py.html#re', id ='100206292', onmouseover='highlight("100206292","100206292","100206292")', title='{re :: re | random :: random | warnings :: warnings}'><a name='re', id ='100206292', onmouseover='highlight("100206292","1808968158","1041388638","1808968222","1041388577","1041388705")', title='re :: re'><a name='warnings', id ='100206292', onmouseover='highlight(100206292)', title='warnings :: warnings'><a name='random', id ='100206292', onmouseover='highlight("100206292","1041366508")', title='random :: random'>i</a>g</a>ht </a>(C</a>) 2001-2010 Python Software Foundation
<span class='lineno'>2</span> # Contact: email-sig@python.org
<span class='lineno'>3</span> 
<span class='lineno'>4</span> <span class='doc-string'>&quot;&quot;&quot;Classes to generate plain text from a message object tree.&quot;&quot;&quot;</span>
<span class='lineno'>5</span> 
<span class='lineno'>6</span> <a name='generator.__all__', id ='1808970173', title='generator.__all__ :: [str]'>__all__</a> = [&#39;Generator&#39;, &#39;DecodedGenerator&#39;]
<span class='lineno'>7</span> 
<span class='lineno'>8</span> import re
<span class='lineno'>9</span> import sys
<span class='lineno'>10</span> import time
<span class='lineno'>11</span> import random
<span class='lineno'>12</span> import warnings
<span class='lineno'>13</span> 
<span class='lineno'>14</span> from cStringIO import StringIO
<span class='lineno'>15</span> from email.header import Header
<span class='lineno'>16</span> 
<span class='lineno'>17</span> <a name='generator.UNDERSCORE', id ='1808968341', onmouseover='highlight(243412857)', title='generator.UNDERSCORE :: str'><span class='constant'>UNDERSCORE</span></a> = &#39;_&#39;
<span class='lineno'>18</span> <span class='constant'><a name='generator.NL', id ='1808968282', onmouseover='highlight("243319760","1041269412","1041272267")', title='generator.NL :: str'>NL</span></a> = &#39;\n&#39;
<span class='lineno'>19</span> 
<span class='lineno'>20</span> <a name='generator.fcre', id ='1808968250', onmouseover='highlight("243296788","243289041","243351383")', title='generator.fcre :: ?'>fcre</a> = <a href='../re.py.html#re', id ='1808968222', onmouseover='highlight(100206292)', title='re :: re'>re</a>.<a href='../re.py.html#re.compile', id ='1808968219', onmouseover='highlight(2025599818)', title='re.compile :: (str, int) -> ? | (my_unicode, int) -> ?'>compile</a>(r&#39;^From &#39;, <a href='../re.py.html#re', id ='1808968158', onmouseover='highlight(100206292)', title='re :: re'>re</a>.<a href='../re.py.html#re.MULTILINE', id ='1808968155', onmouseover='highlight(2025510416)', title='re.MULTILINE :: ?'>MULTILINE</a>)
<span class='lineno'>21</span> 
<span class='lineno'>22</span> def <span class='function'><a name='generator._is8bitstring', id ='1808967446', onmouseover='highlight(243385175)', title='generator._is8bitstring :: ? -> ?'>_is8bitstring</span></a>(<a name='generator._is8bitstring@s', id ='1808967411', onmouseover='highlight("1808967347","1808967221")', title='generator._is8bitstring@s :: ?'><span class='parameter'>s</span></a>):
<span class='lineno'>23</span>     if <a href='http://docs.python.org/library/functions.html#isinstance', id ='1808967379', onmouseover='highlight(37741720)', title='__builtin__.isinstance :: ? -> int'>isinstance</a>(<a href='#generator._is8bitstring@s', id ='1808967347', onmouseover='highlight(1808967411)', title='generator._is8bitstring@s :: ?'>s</a>, <a href='http://docs.python.org/library/functions.html#str', id ='1808967323', onmouseover='highlight(141507136)', title='__builtin__.str :: str'>str</a>):
<span class='lineno'>24</span>         try:
<span class='lineno'>25</span>             <a href='http://docs.python.org/library/functions.html#unicode', id ='1808967229', onmouseover='highlight(1431294356)', title='__builtin__.unicode :: ? -> ?'>unicode</a>(<a href='#generator._is8bitstring@s', id ='1808967221', onmouseover='highlight(1808967411)', title='generator._is8bitstring@s :: ?'>s</a>, &#39;us-ascii&#39;)
<span class='lineno'>26</span>         except <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1808966477', onmouseover='highlight(2016665419)', title='__builtin__.UnicodeError :: <UnicodeError>'>UnicodeError</a>:
<span class='lineno'>27</span>             return <span class='builtin'><a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1808966360', onmouseover='highlight(2016665419)', title='__builtin__.True :: ?'>True</a></span>
<span class='lineno'>28</span>     return <span class='builtin'><a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1808966323', onmouseover='highlight(2016665419)', title='__builtin__.False :: ?'>False</a></span>
<span class='lineno'>29</span> 
<span class='lineno'>30</span> 
<span class='lineno'>31</span> 
<span class='lineno'>32</span> class <a name='generator.Generator', id ='1808966265', onmouseover='highlight("1938568353","1041302090","1322901285","1041333832","1938573222")', title='generator.Generator :: <Generator>'><span class='type-name'>Generator</span></a>:
<span class='lineno'>33</span>     <span class='doc-string'>&quot;&quot;&quot;Generates output from a Message object tree.
<span class='lineno'>34</span> 
<span class='lineno'>35</span>     This basic generator writes the message to the given file object as plain
<span class='lineno'>36</span>     text.
<span class='lineno'>37</span>     &quot;&quot;&quot;</span>
<span class='lineno'>38</span>     #
<span class='lineno'>39</span>     # Public interface
<span class='lineno'>40</span>     #
<span class='lineno'>41</span> 
<span class='lineno'>42</span>     def <a name='generator.Generator.__init__', id ='1808964339', onmouseover='highlight(1041333863)', title='generator.Generator.__init__ :: (Generator, StringIO, ?, int) -> None | (Generator, DecodedGenerator, ?, ?) -> None'><span class='function'>__init__</span></a>(<span class='parameter'><a name='generator.Generator.__init__@self', id ='1808964309', onmouseover='highlight("243500243","243499504","243499378")', title='generator.Generator.__init__@self :: Generator'>self</span></a>, <span class='parameter'><a name='generator.Generator.__init__@outfp', id ='1808964282', onmouseover='highlight(243499560)', title='generator.Generator.__init__@outfp :: {DecodedGenerator | StringIO}'>outfp</a></span>, <span class='parameter'><a name='generator.Generator.__init__@mangle_from_', id ='1808963603', onmouseover='highlight(243499441)', title='generator.Generator.__init__@mangle_from_ :: ?'>mangle_from_</span></a>=<a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1808963569', onmouseover='highlight(2016665419)', title='__builtin__.True :: ?'>True</a>, <a name='generator.Generator.__init__@maxheaderlen', id ='1808963563', onmouseover='highlight(243499315)', title='generator.Generator.__init__@maxheaderlen :: int'><span class='parameter'>maxheaderlen</a></span>=<span class='number'>78</span>):
<span class='lineno'>43</span>         <span class='doc-string'>&quot;&quot;&quot;Create the generator for message flattening.
<span class='lineno'>44</span> 
<span class='lineno'>45</span>         outfp is the output file-like object for writing the message to.  It
<span class='lineno'>46</span>         must have a write() method.
<span class='lineno'>47</span> 
<span class='lineno'>48</span>         Optional mangle_from_ is a flag that, when True (the default), escapes
<span class='lineno'>49</span>         From_ lines in the body of the message by putting a `&gt;&#39; in front of
<span class='lineno'>50</span>         them.
<span class='lineno'>51</span> 
<span class='lineno'>52</span>         Optional maxheaderlen specifies the longest length for a non-continued
<span class='lineno'>53</span>         header.  When a header line is longer (in characters, with tabs
<span class='lineno'>54</span>         expanded to 8 spaces) than maxheaderlen, the header will split as
<span class='lineno'>55</span>         defined in the Header class.  Set maxheaderlen to zero to disable
<span class='lineno'>56</span>         header wrapping.  The default is 78, as recommended (but not required)
<span class='lineno'>57</span>         by RFC 2822.
<span class='lineno'>58</span>         &quot;&quot;&quot;</span>
<span class='lineno'>59</span>         <a href='#generator.Generator.__init__@self', id ='243500243', onmouseover='highlight(1808964309)', title='generator.Generator.__init__@self :: Generator'>self</a>.<a name='generator.Generator._fp', id ='243499566', onmouseover='highlight(243441652)', title='generator.Generator._fp :: {DecodedGenerator | StringIO}'>_fp</a> = <a href='#generator.Generator.__init__@outfp', id ='243499560', onmouseover='highlight(1808964282)', title='generator.Generator.__init__@outfp :: {DecodedGenerator | StringIO}'>outfp</a>
<span class='lineno'>60</span>         <a href='#generator.Generator.__init__@self', id ='243499504', onmouseover='highlight(1808964309)', title='generator.Generator.__init__@self :: Generator'>self</a>.<a name='generator.Generator._mangle_from_', id ='243499499', title='generator.Generator._mangle_from_ :: ?'>_mangle_from_</a> = <a href='#generator.Generator.__init__@mangle_from_', id ='243499441', onmouseover='highlight(1808963603)', title='generator.Generator.__init__@mangle_from_ :: ?'>mangle_from_</a>
<span class='lineno'>61</span>         <a href='#generator.Generator.__init__@self', id ='243499378', onmouseover='highlight(1808964309)', title='generator.Generator.__init__@self :: Generator'>self</a>.<a name='generator.Generator._maxheaderlen', id ='243499373', onmouseover='highlight(243408084)', title='generator.Generator._maxheaderlen :: int'>_maxheaderlen</a> = <a href='#generator.Generator.__init__@maxheaderlen', id ='243499315', onmouseover='highlight(1808963563)', title='generator.Generator.__init__@maxheaderlen :: int'>maxheaderlen</a>
<span class='lineno'>62</span> 
<span class='lineno'>63</span>     def <a name='generator.Generator.write', id ='243498600', onmouseover='highlight("243437032","243498356","1041272240","243290840","243288047","243350582","243294594","1041301066","243325410","243291737")', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'><span class='function'>write</span></a>(<span class='parameter'><a name='generator.Generator.write@self', id ='243498573', onmouseover='highlight(243498386)', title='generator.Generator.write@self :: {DecodedGenerator | Generator}'>self</a></span>, <span class='parameter'><a name='generator.Generator.write@s', id ='243498567', onmouseover='highlight(243498350)', title='generator.Generator.write@s :: {[?] | str}'>s</a></span>):
<span class='lineno'>64</span>         # Just delegate to the file object
<span class='lineno'>65</span>         <a href='#generator.Generator.write@self', id ='243498386', onmouseover='highlight(243498573)', title='generator.Generator.write@self :: {DecodedGenerator | Generator}'>self</a>.<a href='#generator.Generator._fp', id ='243498381', onmouseover='highlight("243499566","243439954","243440883")', title='generator.Generator._fp :: DecodedGenerator'>_fp</a>.<a href='#generator.Generator.write', id ='243498356', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(<a href='#generator.Generator.write@s', id ='243498350', onmouseover='highlight(243498567)', title='generator.Generator.write@s :: {[?] | str}'>s</a>)
<span class='lineno'>66</span> 
<span class='lineno'>67</span>     def <span class='function'><a name='generator.Generator.flatten', id ='243497645', onmouseover='highlight("1938569190","1938574061","1322900478")', title='generator.Generator.flatten :: (Generator, str, ?) -> None'>flatten</a></span>(<a name='generator.Generator.flatten@self', id ='243497637', onmouseover='highlight(243470614)', title='generator.Generator.flatten@self :: Generator'><span class='parameter'>self</span></a>, <span class='parameter'><a name='generator.Generator.flatten@msg', id ='243497610', onmouseover='highlight("243470581","243472407")', title='generator.Generator.flatten@msg :: str'>msg</span></a>, <span class='parameter'><a name='generator.Generator.flatten@unixfrom', id ='243497584', onmouseover='highlight(243472500)', title='generator.Generator.flatten@unixfrom :: ?'>unixfrom</a></span>=<a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243497575', onmouseover='highlight(2016665419)', title='__builtin__.False :: ?'>False</a>):
<span class='lineno'>68</span>         <span class='doc-string'>&quot;&quot;&quot;Print the message object tree rooted at msg to the output file
<span class='lineno'>69</span>         specified when the Generator instance was created.
<span class='lineno'>70</span> 
<span class='lineno'>71</span>         unixfrom is a flag that forces the printing of a Unix From_ delimiter
<span class='lineno'>72</span>         before the first object in the message tree.  If the original message
<span class='lineno'>73</span>         has no From_ delimiter, a `standard&#39; one is crafted.  By default, this
<span class='lineno'>74</span>         is False to inhibit the printing of any From_ delimiter.
<span class='lineno'>75</span> 
<span class='lineno'>76</span>         Note that for subobjects, no From_ line is printed.
<span class='lineno'>77</span>         &quot;&quot;&quot;</span>
<span class='lineno'>78</span>         if <a href='#generator.Generator.flatten@unixfrom', id ='243472500', onmouseover='highlight(243497584)', title='generator.Generator.flatten@unixfrom :: ?'>unixfrom</a>:
<span class='lineno'>79</span>             <a name='generator.Generator.flatten&ufrom', id ='243472436', onmouseover='highlight("243471634","243470670")', title='generator.Generator.flatten&ufrom :: str'><a name='generator.Generator.flatten&ufrom', id ='243472436', onmouseover='highlight("243471634","243470670")', title='generator.Generator.flatten&ufrom :: str'><a name='generator.Generator.flatten&ufrom', id ='243472436', onmouseover='highlight("243471634","243470670")', title='generator.Generator.flatten&ufrom :: str'><a name='generator.Generator.flatten&ufrom', id ='243472436', onmouseover='highlight("243471634","243470670")', title='generator.Generator.flatten&ufrom :: str'>ufrom</a></a></a></a> = <a href='#generator.Generator.flatten@msg', id ='243472407', onmouseover='highlight(243497610)', title='generator.Generator.flatten@msg :: str'>msg</a>.get_unixfrom()
<span class='lineno'>80</span>             if not <a href='#generator.Generator.flatten&ufrom', id ='243471634', onmouseover='highlight("243471569","243472436","243471569","243472436","243471569","243472436","243471569","243472436")', title='{generator.Generator.flatten&ufrom :: str | generator.Generator.flatten&ufrom :: str | generator.Generator.flatten&ufrom :: str | generator.Generator.flatten&ufrom :: str}'>ufrom</a>:
<span class='lineno'>81</span>                 <span class='identifier'><a name='generator.Generator.flatten&ufrom', id ='243471569', onmouseover='highlight("243471634","243470670")', title='generator.Generator.flatten&ufrom :: str'><a name='generator.Generator.flatten&ufrom', id ='243471569', onmouseover='highlight("243471634","243470670")', title='generator.Generator.flatten&ufrom :: str'><span class='identifier'><a name='generator.Generator.flatten&ufrom', id ='243471569', onmouseover='highlight("243471634","243470670")', title='generator.Generator.flatten&ufrom :: str'><span class='identifier'><span class='identifier'><a name='generator.Generator.flatten&ufrom', id ='243471569', onmouseover='highlight("243471634","243470670")', title='generator.Generator.flatten&ufrom :: str'>ufrom</a></span></a></span></span></span></a></a> = &#39;From nobody &#39; + <a href='http://docs.python.org/library/time.html', id ='243471481', onmouseover='highlight(1325127296)', title='generator.time :: time'>time</a>.<a href='http://docs.python.org/library/time.html', id ='243471476', onmouseover='highlight(1325127296)', title='time.ctime :: ? -> str'>ctime</a>(<a href='http://docs.python.org/library/time.html', id ='243471449', onmouseover='highlight(1325127296)', title='generator.time :: time'>time</a>.<a href='http://docs.python.org/library/time.html', id ='243471444', onmouseover='highlight(1325127296)', title='time.time :: ? -> int'>time</a>())
<span class='lineno'>82</span>             print &gt;&gt; self._fp, <a href='#generator.Generator.flatten&ufrom', id ='243470670', onmouseover='highlight("243471569","243472436")', title='generator.Generator.flatten&ufrom :: str'>ufrom</a>
<span class='lineno'>83</span>         <a href='#generator.Generator.flatten@self', id ='243470614', onmouseover='highlight(243497637)', title='generator.Generator.flatten@self :: Generator'>self</a>.<a href='#generator.Generator._write', id ='243470609', onmouseover='highlight(243468561)', title='generator.Generator._write :: (Generator, str) -> None'>_write</a>(<a href='#generator.Generator.flatten@msg', id ='243470581', onmouseover='highlight(243497610)', title='generator.Generator.flatten@msg :: str'>msg</a>)
<span class='lineno'>84</span> 
<span class='lineno'>85</span>     def <span class='function'><a name='generator.Generator.clone', id ='243470546', onmouseover='highlight("243323425","1041273201","243260023")', title='generator.Generator.clone :: (Generator, ?) -> ?'>clone</span></a>(<a name='generator.Generator.clone@self', id ='243470519', onmouseover='highlight("243469528","243469589","243468815")', title='generator.Generator.clone@self :: Generator'><span class='parameter'>self</span></a>, <span class='parameter'><a name='generator.Generator.clone@fp', id ='243470513', onmouseover='highlight(243469553)', title='generator.Generator.clone@fp :: ?'>fp</a></span>):
<span class='lineno'>86</span>         <span class='doc-string'>&quot;&quot;&quot;Clone this generator with the exact same options.&quot;&quot;&quot;</span>
<span class='lineno'>87</span>         return <a href='#generator.Generator.clone@self', id ='243469589', onmouseover='highlight(243470519)', title='generator.Generator.clone@self :: Generator'>self</a>.__class__(<a href='#generator.Generator.clone@fp', id ='243469553', onmouseover='highlight(243470513)', title='generator.Generator.clone@fp :: ?'>fp</a>, <a href='#generator.Generator.clone@self', id ='243469528', onmouseover='highlight(243470519)', title='generator.Generator.clone@self :: Generator'>self</a>.<a href='#generator.Generator._mangle_from_', id ='243469523', onmouseover='highlight(243499499)', title='generator.Generator._mangle_from_ :: ?'>_mangle_from_</a>, <a href='#generator.Generator.clone@self', id ='243468815', onmouseover='highlight(243470519)', title='generator.Generator.clone@self :: Generator'>self</a>.<a href='#generator.Generator._maxheaderlen', id ='243468810', onmouseover='highlight("243263156","243264088","243499373")', title='generator.Generator._maxheaderlen :: int'>_maxheaderlen</a>)
<span class='lineno'>88</span> 
<span class='lineno'>89</span>     #
<span class='lineno'>90</span>     # Protected interface - undocumented ;/
<span class='lineno'>91</span>     #
<span class='lineno'>92</span> 
<span class='lineno'>93</span>     def <a name='generator.Generator._write', id ='243468561', onmouseover='highlight(243470609)', title='generator.Generator._write :: (Generator, str) -> None'><span class='function'>_write</span></a>(<span class='parameter'><a name='generator.Generator._write@self', id ='243468533', onmouseover='highlight("243437909","243441657","243440785","243437097","243439980","243440909","243437041")', title='generator.Generator._write@self :: Generator'>self</a></span>, <a name='generator.Generator._write@msg', id ='243467855', onmouseover='highlight("243437847","243438773","243440728")', title='generator.Generator._write@msg :: str'><span class='parameter'>msg</a></span>):
<span class='lineno'>94</span>         # We can&#39;t write the headers yet because of the following scenario:
<span class='lineno'>95</span>         # say a multipart message includes the boundary string somewhere in
<span class='lineno'>96</span>         # its body.  We&#39;d have to calculate the new boundary /before/ we write
<span class='lineno'>97</span>         # the headers so that we can write the correct Content-Type:
<span class='lineno'>98</span>         # parameter.
<span class='lineno'>99</span>         #
<span class='lineno'>100</span>         # The way we do this, so as to make the _handle_*() methods simpler,
<span class='lineno'>101</span>         # is to cache any subpart writes into a StringIO.  The we write the
<span class='lineno'>102</span>         # headers and the StringIO contents.  That way, subpart handlers can
<span class='lineno'>103</span>         # Do The Right Thing, and can still modify the Content-Type: header if
<span class='lineno'>104</span>         # necessary.
<span class='lineno'>105</span>         <a name='generator.Generator._write&oldfp', id ='243441686', onmouseover='highlight(243439948)', title='generator.Generator._write&oldfp :: {DecodedGenerator | StringIO}'><span class='identifier'>oldfp</span></a> = <a href='#generator.Generator._write@self', id ='243441657', onmouseover='highlight(243468533)', title='generator.Generator._write@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='243441652', onmouseover='highlight(243499566)', title='generator.Generator._fp :: {DecodedGenerator | StringIO}'>_fp</a>
<span class='lineno'>106</span>         try:
<span class='lineno'>107</span>             <a href='#generator.Generator._write@self', id ='243440909', onmouseover='highlight(243468533)', title='generator.Generator._write@self :: Generator'>self</a>.<a name='generator.Generator._fp', id ='243440883', title='generator.Generator._fp :: ?'>_fp</a> = <span class='identifier'><a name='generator.Generator._write&sfp', id ='243440877', onmouseover='highlight(243437005)', title='generator.Generator._write&sfp :: ?'>sfp</a></span> = StringIO()
<span class='lineno'>108</span>             <a href='#generator.Generator._write@self', id ='243440785', onmouseover='highlight(243468533)', title='generator.Generator._write@self :: Generator'>self</a>.<a href='#generator.Generator._dispatch', id ='243440759', onmouseover='highlight(243436917)', title='generator.Generator._dispatch :: (Generator, str) -> None'>_dispatch</a>(<a href='#generator.Generator._write@msg', id ='243440728', onmouseover='highlight(243467855)', title='generator.Generator._write@msg :: str'>msg</a>)
<span class='lineno'>109</span>         finally:
<span class='lineno'>110</span>             <a href='#generator.Generator._write@self', id ='243439980', onmouseover='highlight(243468533)', title='generator.Generator._write@self :: Generator'>self</a>.<a name='generator.Generator._fp', id ='243439954', onmouseover='highlight(243437036)', title='generator.Generator._fp :: StringIO'>_fp</a> = <a href='#generator.Generator._write&oldfp', id ='243439948', onmouseover='highlight(243441686)', title='generator.Generator._write&oldfp :: {DecodedGenerator | StringIO}'>oldfp</a>
<span class='lineno'>111</span>         # Write the headers.  First we see if the message object wants to
<span class='lineno'>112</span>         # handle that itself.  If not, we&#39;ll do it generically.
<span class='lineno'>113</span>         <span class='identifier'><a name='generator.Generator._write&meth', id ='243438830', onmouseover='highlight("243437102","243437998")', title='generator.Generator._write&meth :: ?'>meth</a></span> = <a href='http://docs.python.org/library/functions.html#getattr', id ='243438802', onmouseover='highlight(718294870)', title='__builtin__.getattr :: ? -> ?'>getattr</a>(<a href='#generator.Generator._write@msg', id ='243438773', onmouseover='highlight(243467855)', title='generator.Generator._write@msg :: str'>msg</a>, &#39;_write_headers&#39;, <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243438057', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</a></span>)
<span class='lineno'>114</span>         if <a href='#generator.Generator._write&meth', id ='243437998', onmouseover='highlight(243438830)', title='generator.Generator._write&meth :: ?'>meth</a> is <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243437969', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</a></span>:
<span class='lineno'>115</span>             <a href='#generator.Generator._write@self', id ='243437909', onmouseover='highlight(243468533)', title='generator.Generator._write@self :: Generator'>self</a>.<a href='#generator.Generator._write_headers', id ='243437904', onmouseover='highlight(243409109)', title='generator.Generator._write_headers :: (Generator, str) -> None'>_write_headers</a>(<a href='#generator.Generator._write@msg', id ='243437847', onmouseover='highlight(243467855)', title='generator.Generator._write@msg :: str'>msg</a>)
<span class='lineno'>116</span>         else:
<span class='lineno'>117</span>             <a href='#generator.Generator._write&meth', id ='243437102', onmouseover='highlight(243438830)', title='generator.Generator._write&meth :: ?'>meth</a>(<a href='#generator.Generator._write@self', id ='243437097', onmouseover='highlight(243468533)', title='generator.Generator._write@self :: Generator'>self</a>)
<span class='lineno'>118</span>         <a href='#generator.Generator._write@self', id ='243437041', onmouseover='highlight(243468533)', title='generator.Generator._write@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='243437036', onmouseover='highlight("243439954","243499566","243439954","243440883")', title='{generator.Generator._fp :: StringIO | generator.Generator._fp :: DecodedGenerator}'>_fp</a>.<a href='../StringIO.py.html#StringIO.StringIO.write', id ='243437032', onmouseover='highlight("925723651","243498600")', title='{StringIO.StringIO.write :: (StringIO, str) -> None | (StringIO, {(str, str, ?, str, ?, str) | (str, str, (str, str, ?, str, ?, str), str)}) -> None | generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None}'>write</a>(<a href='#generator.Generator._write&sfp', id ='243437005', onmouseover='highlight(243440877)', title='generator.Generator._write&sfp :: ?'>sfp</a>.getvalue())
<span class='lineno'>119</span> 
<span class='lineno'>120</span>     def <span class='function'><a name='generator.Generator._dispatch', id ='243436917', onmouseover='highlight(243440759)', title='generator.Generator._dispatch :: (Generator, str) -> None'>_dispatch</a></span>(<span class='parameter'><a name='generator.Generator._dispatch@self', id ='243436886', onmouseover='highlight("243410933","243411989","243410007")', title='generator.Generator._dispatch@self :: Generator'>self</a></span>, <span class='parameter'><a name='generator.Generator._dispatch@msg', id ='243436880', onmouseover='highlight("243413783","243409915","243413007")', title='generator.Generator._dispatch@msg :: str'>msg</span></a>):
<span class='lineno'>121</span>         # Get the Content-Type: for the message, then try to dispatch to
<span class='lineno'>122</span>         # self._handle_&lt;maintype&gt;_&lt;subtype&gt;().  If there&#39;s no handler for the
<span class='lineno'>123</span>         # full MIME type, then dispatch to self._handle_&lt;maintype&gt;().  If
<span class='lineno'>124</span>         # that&#39;s missing too, then dispatch to self._writeBody().
<span class='lineno'>125</span>         <span class='identifier'><a name='generator.Generator._dispatch&main', id ='243413790', onmouseover='highlight("243411088","243412798")', title='generator.Generator._dispatch&main :: ?'>main</span></a> = <a href='#generator.Generator._dispatch@msg', id ='243413783', onmouseover='highlight(243436880)', title='generator.Generator._dispatch@msg :: str'>msg</a>.get_content_maintype()
<span class='lineno'>126</span>         <a name='generator.Generator._dispatch&sub', id ='243413013', onmouseover='highlight(243412792)', title='generator.Generator._dispatch&sub :: ?'><span class='identifier'>sub</a></span> = <a href='#generator.Generator._dispatch@msg', id ='243413007', onmouseover='highlight(243436880)', title='generator.Generator._dispatch@msg :: str'>msg</a>.get_content_subtype()
<span class='lineno'>127</span>         <span class='identifier'><a name='generator.Generator._dispatch&specific', id ='243412889', onmouseover='highlight(243411928)', title='generator.Generator._dispatch&specific :: ?'>specific</a></span> = <a href='#generator.UNDERSCORE', id ='243412857', onmouseover='highlight(1808968341)', title='generator.UNDERSCORE :: str'>UNDERSCORE</a>.<a href='http://docs.python.org/library/stdtypes.html#str.join', id ='243412825', onmouseover='highlight(760704539)', title='__builtin__.str.join :: ? -> str'>join</a>((<a href='#generator.Generator._dispatch&main', id ='243412798', onmouseover='highlight(243413790)', title='generator.Generator._dispatch&main :: ?'>main</a>, <a href='#generator.Generator._dispatch&sub', id ='243412792', onmouseover='highlight(243413013)', title='generator.Generator._dispatch&sub :: ?'>sub</a>)).replace(&#39;-&#39;, &#39;_&#39;)
<span class='lineno'>128</span>         <a name='generator.Generator._dispatch&meth', id ='243412046', onmouseover='highlight("243410128","243411838","243409941")', title='generator.Generator._dispatch&meth :: (Generator, str) -> None'><a name='generator.Generator._dispatch&meth', id ='243412046', onmouseover='highlight("243410128","243411838","243409941")', title='generator.Generator._dispatch&meth :: (Generator, str) -> None'>meth</a></a> = <a href='http://docs.python.org/library/functions.html#getattr', id ='243412018', onmouseover='highlight(718294870)', title='__builtin__.getattr :: ? -> ?'>getattr</a>(<a href='#generator.Generator._dispatch@self', id ='243411989', onmouseover='highlight(243436886)', title='generator.Generator._dispatch@self :: Generator'>self</a>, &#39;_handle_&#39; + <a href='#generator.Generator._dispatch&specific', id ='243411928', onmouseover='highlight(243412889)', title='generator.Generator._dispatch&specific :: ?'>specific</a>, <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243411897', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</span></a>)
<span class='lineno'>129</span>         if <a href='#generator.Generator._dispatch&meth', id ='243411838', onmouseover='highlight("243410035","243412046","243410969","243410035","243412046","243410969")', title='{generator.Generator._dispatch&meth :: (Generator, str) -> None | generator.Generator._dispatch&meth :: (Generator, str) -> None}'>meth</a> is <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243411830', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</a></span>:
<span class='lineno'>130</span>             <a name='generator.Generator._dispatch&generic', id ='243411119', onmouseover='highlight(243410872)', title='generator.Generator._dispatch&generic :: ?'><span class='identifier'>generic</a></span> = <a href='#generator.Generator._dispatch&main', id ='243411088', onmouseover='highlight(243413790)', title='generator.Generator._dispatch&main :: ?'>main</a>.replace(&#39;-&#39;, &#39;_&#39;)
<span class='lineno'>131</span>             <a name='generator.Generator._dispatch&meth', id ='243410969', onmouseover='highlight("243410128","243411838","243409941")', title='generator.Generator._dispatch&meth :: (Generator, str) -> None'><a name='generator.Generator._dispatch&meth', id ='243410969', onmouseover='highlight("243410128","243411838","243409941")', title='generator.Generator._dispatch&meth :: (Generator, str) -> None'>meth</a></a> = <a href='http://docs.python.org/library/functions.html#getattr', id ='243410962', onmouseover='highlight(718294870)', title='__builtin__.getattr :: ? -> ?'>getattr</a>(<a href='#generator.Generator._dispatch@self', id ='243410933', onmouseover='highlight(243436886)', title='generator.Generator._dispatch@self :: Generator'>self</a>, &#39;_handle_&#39; + <a href='#generator.Generator._dispatch&generic', id ='243410872', onmouseover='highlight(243411119)', title='generator.Generator._dispatch&generic :: ?'>generic</a>, <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243410191', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</span></a>)
<span class='lineno'>132</span>             if <a href='#generator.Generator._dispatch&meth', id ='243410128', onmouseover='highlight("243410035","243412046","243410969","243410035","243412046","243410969")', title='{generator.Generator._dispatch&meth :: (Generator, str) -> None | generator.Generator._dispatch&meth :: (Generator, str) -> None}'>meth</a> is <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243410099', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</a></span>:
<span class='lineno'>133</span>                 <span class='identifier'><a name='generator.Generator._dispatch&meth', id ='243410035', onmouseover='highlight("243410128","243411838","243409941")', title='generator.Generator._dispatch&meth :: (Generator, str) -> None'><a name='generator.Generator._dispatch&meth', id ='243410035', onmouseover='highlight("243410128","243411838","243409941")', title='generator.Generator._dispatch&meth :: (Generator, str) -> None'><span class='identifier'>meth</a></span></a></span> = <a href='#generator.Generator._dispatch@self', id ='243410007', onmouseover='highlight(243436886)', title='generator.Generator._dispatch@self :: Generator'>self</a>.<a href='#generator.Generator._writeBody', id ='243410002', onmouseover='highlight(243350451)', title='generator.Generator._writeBody :: (Generator, str) -> None'>_writeBody</a>
<span class='lineno'>134</span>         <a href='#generator.Generator._dispatch&meth', id ='243409941', onmouseover='highlight("243410035","243412046","243410969")', title='generator.Generator._dispatch&meth :: (Generator, str) -> None'>meth</a>(<a href='#generator.Generator._dispatch@msg', id ='243409915', onmouseover='highlight(243436880)', title='generator.Generator._dispatch@msg :: str'>msg</a>)
<span class='lineno'>135</span> 
<span class='lineno'>136</span>     #
<span class='lineno'>137</span>     # Default handlers
<span class='lineno'>138</span>     #
<span class='lineno'>139</span> 
<span class='lineno'>140</span>     def <a name='generator.Generator._write_headers', id ='243409109', onmouseover='highlight(243437904)', title='generator.Generator._write_headers :: (Generator, str) -> None'><span class='function'>_write_headers</span></a>(<a name='generator.Generator._write_headers@self', id ='243409073', onmouseover='highlight(243408110)', title='generator.Generator._write_headers@self :: Generator'><span class='parameter'>self</a></span>, <a name='generator.Generator._write_headers@msg', id ='243409046', onmouseover='highlight(243408978)', title='generator.Generator._write_headers@msg :: str'><span class='parameter'>msg</span></a>):
<span class='lineno'>141</span>         for <a name='generator.Generator._write_headers&h', id ='243408986', onmouseover='highlight(243408149)', title='generator.Generator._write_headers&h :: ?'>h</a>, <a name='generator.Generator._write_headers&v', id ='243408983', onmouseover='highlight("243356161","243380341","243385140","243407150","243385917","243407057")', title='generator.Generator._write_headers&v :: ?'>v</a> in <a href='#generator.Generator._write_headers@msg', id ='243408978', onmouseover='highlight(243409046)', title='generator.Generator._write_headers@msg :: str'>msg</a>.items():
<span class='lineno'>142</span>             print &gt;&gt; self._fp, &#39;%s:&#39; % <a href='#generator.Generator._write_headers&h', id ='243408149', onmouseover='highlight(243408986)', title='generator.Generator._write_headers&h :: ?'>h</a>,
<span class='lineno'>143</span>             if <a href='#generator.Generator._write_headers@self', id ='243408110', onmouseover='highlight(243409073)', title='generator.Generator._write_headers@self :: Generator'>self</a>.<a href='#generator.Generator._maxheaderlen', id ='243408084', onmouseover='highlight("243499373","243263156","243264088","243499373")', title='{generator.Generator._maxheaderlen :: int | generator.Generator._maxheaderlen :: int}'>_maxheaderlen</a> == <span class='number'>0</span>:
<span class='lineno'>144</span>                 # Explicit no-wrapping
<span class='lineno'>145</span>                 print &gt;&gt; self._fp, <a href='#generator.Generator._write_headers&v', id ='243407150', onmouseover='highlight(243408983)', title='generator.Generator._write_headers&v :: ?'>v</a>
<span class='lineno'>146</span>             elif <a href='http://docs.python.org/library/functions.html#isinstance', id ='243407089', onmouseover='highlight(37741720)', title='__builtin__.isinstance :: ? -> int'>isinstance</a>(<a href='#generator.Generator._write_headers&v', id ='243407057', onmouseover='highlight(243408983)', title='generator.Generator._write_headers&v :: ?'>v</a>, Header):
<span class='lineno'>147</span>                 # Header instances know what to do
<span class='lineno'>148</span>                 print &gt;&gt; self._fp, <a href='#generator.Generator._write_headers&v', id ='243385917', onmouseover='highlight(243408983)', title='generator.Generator._write_headers&v :: ?'>v</a>.encode()
<span class='lineno'>149</span>             elif <a href='#generator._is8bitstring', id ='243385175', onmouseover='highlight(1808967446)', title='generator._is8bitstring :: ? -> ?'>_is8bitstring</a>(<a href='#generator.Generator._write_headers&v', id ='243385140', onmouseover='highlight(243408983)', title='generator.Generator._write_headers&v :: ?'>v</a>):
<span class='lineno'>150</span>                 # If we have raw 8bit data in a byte string, we have no idea
<span class='lineno'>151</span>                 # what the encoding is.  There is no safe way to split this
<span class='lineno'>152</span>                 # string.  If it&#39;s ascii-subset, then we could do a normal
<span class='lineno'>153</span>                 # ascii split, but if it&#39;s multibyte then we could break the
<span class='lineno'>154</span>                 # string.  There&#39;s no way to know so the least harm seems to
<span class='lineno'>155</span>                 # be to not split the string and risk it being too long.
<span class='lineno'>156</span>                 print &gt;&gt; self._fp, <a href='#generator.Generator._write_headers&v', id ='243380341', onmouseover='highlight(243408983)', title='generator.Generator._write_headers&v :: ?'>v</a>
<span class='lineno'>157</span>             else:
<span class='lineno'>158</span>                 # Header&#39;s got lots of smarts, so use it.  Note that this is
<span class='lineno'>159</span>                 # fundamentally broken though because we lose idempotency when
<span class='lineno'>160</span>                 # the header string is continued with tabs.  It will now be
<span class='lineno'>161</span>                 # continued with spaces.  This was reversedly broken before we
<span class='lineno'>162</span>                 # fixed bug 1974.  Either way, we lose.
<span class='lineno'>163</span>                 print &gt;&gt; self._fp, Header(
<span class='lineno'>164</span>                     <a href='#generator.Generator._write_headers&v', id ='243356161', onmouseover='highlight(243408983)', title='generator.Generator._write_headers&v :: ?'>v</a>, maxlinelen=self._maxheaderlen, header_name=h).encode()
<span class='lineno'>165</span>         # A blank line always separates headers from body
<span class='lineno'>166</span>         print &gt;&gt; self._fp
<span class='lineno'>167</span> 
<span class='lineno'>168</span>     #
<span class='lineno'>169</span>     # Handlers for writing types and subtypes
<span class='lineno'>170</span>     #
<span class='lineno'>171</span> 
<span class='lineno'>172</span>     def <span class='function'><a name='generator.Generator._handle_text', id ='243354208', onmouseover='highlight(243350396)', title='generator.Generator._handle_text :: (Generator, str) -> None'>_handle_text</a></span>(<a name='generator.Generator._handle_text@self', id ='243354174', onmouseover='highlight("243350612","243351509")', title='generator.Generator._handle_text@self :: Generator'><span class='parameter'>self</a></span>, <a name='generator.Generator._handle_text@msg', id ='243353496', onmouseover='highlight(243353430)', title='generator.Generator._handle_text@msg :: str'><span class='parameter'>msg</span></a>):
<span class='lineno'>173</span>         <a name='generator.Generator._handle_text&payload', id ='243353461', onmouseover='highlight("243352499","243351322","243353338","243350576","243351572")', title='generator.Generator._handle_text&payload :: ?'><a name='generator.Generator._handle_text&payload', id ='243353461', onmouseover='highlight("243352499","243351322","243353338","243350576","243351572")', title='generator.Generator._handle_text&payload :: ?'>payload</a></a> = <a href='#generator.Generator._handle_text@msg', id ='243353430', onmouseover='highlight(243353496)', title='generator.Generator._handle_text@msg :: str'>msg</a>.get_payload()
<span class='lineno'>174</span>         if <a href='#generator.Generator._handle_text&payload', id ='243353338', onmouseover='highlight("243351414","243353461","243351414","243353461")', title='{generator.Generator._handle_text&payload :: ? | generator.Generator._handle_text&payload :: ?}'>payload</a> is <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243353306', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</a></span>:
<span class='lineno'>175</span>             return
<span class='lineno'>176</span>         if not <a href='http://docs.python.org/library/functions.html#isinstance', id ='243352531', onmouseover='highlight(37741720)', title='__builtin__.isinstance :: ? -> int'>isinstance</a>(<a href='#generator.Generator._handle_text&payload', id ='243352499', onmouseover='highlight("243351414","243353461","243351414","243353461")', title='{generator.Generator._handle_text&payload :: ? | generator.Generator._handle_text&payload :: ?}'>payload</a>, <a href='http://docs.python.org/library/functions.html#basestring', id ='243352469', onmouseover='highlight(980990405)', title='__builtin__.basestring :: ? -> ?'>basestring</a>):
<span class='lineno'>177</span>             raise <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243352375', onmouseover='highlight(2016665419)', title='__builtin__.TypeError :: <TypeError>'>TypeError</a>(&#39;string payload expected: %s&#39; % <a href='http://docs.python.org/library/functions.html#type', id ='243352249', onmouseover='highlight(124994835)', title='__builtin__.type :: ? -> ?'>type</a>(<a href='#generator.Generator._handle_text&payload', id ='243351572', onmouseover='highlight("243351414","243353461","243351414","243353461")', title='{generator.Generator._handle_text&payload :: ? | generator.Generator._handle_text&payload :: ?}'>payload</a>))
<span class='lineno'>178</span>         if <a href='#generator.Generator._handle_text@self', id ='243351509', onmouseover='highlight(243354174)', title='generator.Generator._handle_text@self :: Generator'>self</a>.<a href='#generator.Generator._mangle_from_', id ='243351504', onmouseover='highlight(243499499)', title='generator.Generator._mangle_from_ :: ?'>_mangle_from_</a>:
<span class='lineno'>179</span>             <a name='generator.Generator._handle_text&payload', id ='243351414', onmouseover='highlight("243352499","243351322","243353338","243350576","243351572")', title='generator.Generator._handle_text&payload :: ?'><a name='generator.Generator._handle_text&payload', id ='243351414', onmouseover='highlight("243352499","243351322","243353338","243350576","243351572")', title='generator.Generator._handle_text&payload :: ?'><span class='identifier'><span class='identifier'>payload</a></span></span></a> = <a href='#generator.fcre', id ='243351383', onmouseover='highlight(1808968250)', title='generator.fcre :: ?'>fcre</a>.sub(&#39;&gt;From &#39;, <a href='#generator.Generator._handle_text&payload', id ='243351322', onmouseover='highlight("243351414","243353461","243351414","243353461")', title='{generator.Generator._handle_text&payload :: ? | generator.Generator._handle_text&payload :: ?}'>payload</a>)
<span class='lineno'>180</span>         <a href='#generator.Generator._handle_text@self', id ='243350612', onmouseover='highlight(243354174)', title='generator.Generator._handle_text@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='243350607', onmouseover='highlight(243499566)', title='generator.Generator._fp :: ?'>_fp</a>.<a href='#generator.Generator.write', id ='243350582', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(<a href='#generator.Generator._handle_text&payload', id ='243350576', onmouseover='highlight("243351414","243353461")', title='generator.Generator._handle_text&payload :: ?'>payload</a>)
<span class='lineno'>181</span> 
<span class='lineno'>182</span>     # Default body handler
<span class='lineno'>183</span>     <a name='generator.Generator._writeBody', id ='243350451', onmouseover='highlight(243410002)', title='generator.Generator._writeBody :: (Generator, str) -> None'>_writeBody</a> = <a href='#generator.Generator._handle_text', id ='243350396', onmouseover='highlight(243354208)', title='generator.Generator._handle_text :: (Generator, str) -> None'>_handle_text</a>
<span class='lineno'>184</span> 
<span class='lineno'>185</span>     def <span class='function'><a name='generator.Generator._handle_multipart', id ='243350332', onmouseover='highlight(243263990)', title='generator.Generator._handle_multipart :: (Generator, ?) -> None'>_handle_multipart</a></span>(<a name='generator.Generator._handle_multipart@self', id ='243349621', onmouseover='highlight("243288077","243291767","243290870","243325440","243323451","243294624","243289844","243317751")', title='generator.Generator._handle_multipart@self :: Generator'><span class='parameter'>self</a></span>, <span class='parameter'><a name='generator.Generator._handle_multipart@msg', id ='243349615', onmouseover='highlight("243296542","243288980","243290062","243296727","243288144","243347574","243321559","243317876","243318864")', title='generator.Generator._handle_multipart@msg :: ?'>msg</a></span>):
<span class='lineno'>186</span>         # The trick here is to write out each part separately, merge them all
<span class='lineno'>187</span>         # together, and then make sure that the boundary we&#39;ve chosen isn&#39;t
<span class='lineno'>188</span>         # present in the payload.
<span class='lineno'>189</span>         <span class='identifier'><a name='generator.Generator._handle_multipart&msgtexts', id ='243347691', onmouseover='highlight("243294588","243319731","243322583","243292854","243294688")', title='generator.Generator._handle_multipart&msgtexts :: [?]'>msgtexts</span></a> = []
<span class='lineno'>190</span>         <a name='generator.Generator._handle_multipart&subparts', id ='243347606', onmouseover='highlight("243324570","243325404","243347482","243323609","243323702","243326456")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</a> = <a href='#generator.Generator._handle_multipart@msg', id ='243347574', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.get_payload()
<span class='lineno'>191</span>         if <a href='#generator.Generator._handle_multipart&subparts', id ='243347482', onmouseover='highlight("243326557","243324386","243347606")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</a> is <span class='builtin'><a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243347449', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'>None</span></a>:
<span class='lineno'>192</span>             <span class='identifier'><a name='generator.Generator._handle_multipart&subparts', id ='243326557', onmouseover='highlight("243324570","243325404","243347482","243323609","243323702","243326456")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</span></a> = []
<span class='lineno'>193</span>         elif <a href='http://docs.python.org/library/functions.html#isinstance', id ='243326488', onmouseover='highlight(37741720)', title='__builtin__.isinstance :: ? -> int'>isinstance</a>(<a href='#generator.Generator._handle_multipart&subparts', id ='243326456', onmouseover='highlight("243326557","243324386","243347606")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</a>, <a href='http://docs.python.org/library/functions.html#basestring', id ='243326425', onmouseover='highlight(980990405)', title='__builtin__.basestring :: ? -> ?'>basestring</a>):
<span class='lineno'>194</span>             # e.g. a non-strict parse of a message with no starting boundary.
<span class='lineno'>195</span>             <a href='#generator.Generator._handle_multipart@self', id ='243325440', onmouseover='highlight(243349621)', title='generator.Generator._handle_multipart@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='243325435', onmouseover='highlight("243499566","243439954","243440883")', title='generator.Generator._fp :: DecodedGenerator'>_fp</a>.<a href='#generator.Generator.write', id ='243325410', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(<a href='#generator.Generator._handle_multipart&subparts', id ='243325404', onmouseover='highlight("243326557","243324386","243347606")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</a>)
<span class='lineno'>196</span>             return
<span class='lineno'>197</span>         elif not <a href='http://docs.python.org/library/functions.html#isinstance', id ='243324602', onmouseover='highlight(37741720)', title='__builtin__.isinstance :: ? -> int'>isinstance</a>(<a href='#generator.Generator._handle_multipart&subparts', id ='243324570', onmouseover='highlight("243326557","243324386","243347606")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</a>, <a href='http://docs.python.org/library/functions.html#list', id ='243324539', onmouseover='highlight(118710921)', title='__builtin__.list :: <list>'>list</a>):
<span class='lineno'>198</span>             # Scalar payload
<span class='lineno'>199</span>             <a name='generator.Generator._handle_multipart&subparts', id ='243324386', onmouseover='highlight("243324570","243325404","243347482","243323609","243323702","243326456")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</a> = [<a href='#generator.Generator._handle_multipart&subparts', id ='243323702', onmouseover='highlight("243326557","243324386","243347606")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</a>]
<span class='lineno'>200</span>         for <a name='generator.Generator._handle_multipart&part', id ='243323638', onmouseover='highlight(243322680)', title='generator.Generator._handle_multipart&part :: ?'>part</a> in <a href='#generator.Generator._handle_multipart&subparts', id ='243323609', onmouseover='highlight("243326557","243324386","243347606")', title='generator.Generator._handle_multipart&subparts :: {[?] | [[?]]}'>subparts</a>:
<span class='lineno'>201</span>             <a name='generator.Generator._handle_multipart&s', id ='243323545', onmouseover='highlight("243322525","243323419")', title='generator.Generator._handle_multipart&s :: ?'><span class='identifier'>s</a></span> = StringIO()
<span class='lineno'>202</span>             <a name='generator.Generator._handle_multipart&g', id ='243323455', onmouseover='highlight(243322711)', title='generator.Generator._handle_multipart&g :: ?'><span class='identifier'>g</a></span> = <a href='#generator.Generator._handle_multipart@self', id ='243323451', onmouseover='highlight(243349621)', title='generator.Generator._handle_multipart@self :: Generator'>self</a>.<a href='#generator.Generator.clone', id ='243323425', onmouseover='highlight(243470546)', title='generator.Generator.clone :: (Generator, ?) -> ?'>clone</a>(<a href='#generator.Generator._handle_multipart&s', id ='243323419', onmouseover='highlight(243323545)', title='generator.Generator._handle_multipart&s :: ?'>s</a>)
<span class='lineno'>203</span>             <a href='#generator.Generator._handle_multipart&g', id ='243322711', onmouseover='highlight(243323455)', title='generator.Generator._handle_multipart&g :: ?'>g</a>.flatten(<a href='#generator.Generator._handle_multipart&part', id ='243322680', onmouseover='highlight(243323638)', title='generator.Generator._handle_multipart&part :: ?'>part</a>, unixfrom=False)
<span class='lineno'>204</span>             <a href='#generator.Generator._handle_multipart&msgtexts', id ='243322583', onmouseover='highlight(243347691)', title='generator.Generator._handle_multipart&msgtexts :: [?]'>msgtexts</a>.<a href='http://docs.python.org/library/stdtypes.html', id ='243322553', onmouseover='highlight(592677897)', title='__builtin__.list.append :: ? -> None'>append</a>(<a href='#generator.Generator._handle_multipart&s', id ='243322525', onmouseover='highlight(243323545)', title='generator.Generator._handle_multipart&s :: ?'>s</a>.getvalue())
<span class='lineno'>205</span>         # BAW: What about boundaries that are wrapped in double-quotes?
<span class='lineno'>206</span>         <a name='generator.Generator._handle_multipart&boundary', id ='243321591', onmouseover='highlight("243291896","243318805","243320790","243294812","243290783")', title='generator.Generator._handle_multipart&boundary :: str'><span class='identifier'>boundary</a></span> = <a href='#generator.Generator._handle_multipart@msg', id ='243321559', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.get_boundary()
<span class='lineno'>207</span>         if not <a href='#generator.Generator._handle_multipart&boundary', id ='243320790', onmouseover='highlight("243321591","243319667")', title='generator.Generator._handle_multipart&boundary :: str'>boundary</a>:
<span class='lineno'>208</span>             # Create a boundary that doesn&#39;t appear in any of the
<span class='lineno'>209</span>             # message texts.
<span class='lineno'>210</span>             <span class='identifier'><a name='generator.Generator._handle_multipart&alltext', id ='243319791', onmouseover='highlight(243319578)', title='generator.Generator._handle_multipart&alltext :: ?'>alltext</a></span> = <a href='#generator.NL', id ='243319760', onmouseover='highlight(1808968282)', title='generator.NL :: str'>NL</a>.<a href='http://docs.python.org/library/stdtypes.html#str.join', id ='243319736', onmouseover='highlight(760704539)', title='__builtin__.str.join :: ? -> str'>join</a>(<a href='#generator.Generator._handle_multipart&msgtexts', id ='243319731', onmouseover='highlight(243347691)', title='generator.Generator._handle_multipart&msgtexts :: [?]'>msgtexts</a>)
<span class='lineno'>211</span>             <a name='generator.Generator._handle_multipart&boundary', id ='243319667', onmouseover='highlight("243291896","243318805","243320790","243294812","243290783")', title='generator.Generator._handle_multipart&boundary :: str'>boundary</a> = <a href='#generator._make_boundary', id ='243319635', onmouseover='highlight(1041365387)', title='generator._make_boundary :: ? -> str'>_make_boundary</a>(<a href='#generator.Generator._handle_multipart&alltext', id ='243319578', onmouseover='highlight(243319791)', title='generator.Generator._handle_multipart&alltext :: ?'>alltext</a>)
<span class='lineno'>212</span>             <a href='#generator.Generator._handle_multipart@msg', id ='243318864', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.set_boundary(<a href='#generator.Generator._handle_multipart&boundary', id ='243318805', onmouseover='highlight("243321591","243319667")', title='generator.Generator._handle_multipart&boundary :: str'>boundary</a>)
<span class='lineno'>213</span>         # If there&#39;s a preamble, write it out, with a trailing CRLF
<span class='lineno'>214</span>         if <a href='#generator.Generator._handle_multipart@msg', id ='243317876', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.preamble is not <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243317814', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</span></a>:
<span class='lineno'>215</span>             if <a href='#generator.Generator._handle_multipart@self', id ='243317751', onmouseover='highlight(243349621)', title='generator.Generator._handle_multipart@self :: Generator'>self</a>.<a href='#generator.Generator._mangle_from_', id ='243317746', onmouseover='highlight(243499499)', title='generator.Generator._mangle_from_ :: ?'>_mangle_from_</a>:
<span class='lineno'>216</span>                 <a name='generator.Generator._handle_multipart&preamble', id ='243317652', onmouseover='highlight(243295742)', title='generator.Generator._handle_multipart&preamble :: ?'>preamble</a> = <a href='#generator.fcre', id ='243296788', onmouseover='highlight(1808968250)', title='generator.fcre :: ?'>fcre</a>.sub(&#39;&gt;From &#39;, <a href='#generator.Generator._handle_multipart@msg', id ='243296727', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.preamble)
<span class='lineno'>217</span>             else:
<span class='lineno'>218</span>                 <span class='identifier'><a name='generator.Generator._handle_multipart&preamble', id ='243296574', onmouseover='highlight(243295742)', title='generator.Generator._handle_multipart&preamble :: ?'>preamble</span></a> = <a href='#generator.Generator._handle_multipart@msg', id ='243296542', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.preamble
<span class='lineno'>219</span>             print &gt;&gt; self._fp, <a href='#generator.Generator._handle_multipart&preamble', id ='243295742', onmouseover='highlight("243296574","243317652")', title='generator.Generator._handle_multipart&preamble :: ?'>preamble</a>
<span class='lineno'>220</span>         # dash-boundary transport-padding CRLF
<span class='lineno'>221</span>         print &gt;&gt; self._fp, &#39;--&#39; + <a href='#generator.Generator._handle_multipart&boundary', id ='243294812', onmouseover='highlight("243321591","243319667")', title='generator.Generator._handle_multipart&boundary :: str'>boundary</a>
<span class='lineno'>222</span>         # body-part
<span class='lineno'>223</span>         if <a href='#generator.Generator._handle_multipart&msgtexts', id ='243294688', onmouseover='highlight(243347691)', title='generator.Generator._handle_multipart&msgtexts :: [?]'>msgtexts</a>:
<span class='lineno'>224</span>             <a href='#generator.Generator._handle_multipart@self', id ='243294624', onmouseover='highlight(243349621)', title='generator.Generator._handle_multipart@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='243294619', onmouseover='highlight("243499566","243439954","243440883")', title='generator.Generator._fp :: DecodedGenerator'>_fp</a>.<a href='#generator.Generator.write', id ='243294594', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(<a href='#generator.Generator._handle_multipart&msgtexts', id ='243294588', onmouseover='highlight(243347691)', title='generator.Generator._handle_multipart&msgtexts :: [?]'>msgtexts</a>.<a href='http://docs.python.org/library/stdtypes.html', id ='243293907', onmouseover='highlight(592677897)', title='__builtin__.list.pop :: ? -> None'>pop</a>(<span class='number'>0</span>))
<span class='lineno'>225</span>         # *encapsulation
<span class='lineno'>226</span>         # --&gt; delimiter transport-padding
<span class='lineno'>227</span>         # --&gt; CRLF body-part
<span class='lineno'>228</span>         for <a name='generator.Generator._handle_multipart&body_part', id ='243292888', onmouseover='highlight(243291710)', title='generator.Generator._handle_multipart&body_part :: ?'>body_part</a> in <a href='#generator.Generator._handle_multipart&msgtexts', id ='243292854', onmouseover='highlight(243347691)', title='generator.Generator._handle_multipart&msgtexts :: [?]'>msgtexts</a>:
<span class='lineno'>229</span>             # delimiter transport-padding CRLF
<span class='lineno'>230</span>             print &gt;&gt; self._fp, &#39;\n--&#39; + <a href='#generator.Generator._handle_multipart&boundary', id ='243291896', onmouseover='highlight("243321591","243319667")', title='generator.Generator._handle_multipart&boundary :: str'>boundary</a>
<span class='lineno'>231</span>             # body-part
<span class='lineno'>232</span>             <a href='#generator.Generator._handle_multipart@self', id ='243291767', onmouseover='highlight(243349621)', title='generator.Generator._handle_multipart@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='243291741', onmouseover='highlight("243499566","243439954","243440883")', title='generator.Generator._fp :: DecodedGenerator'>_fp</a>.<a href='#generator.Generator.write', id ='243291737', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(<a href='#generator.Generator._handle_multipart&body_part', id ='243291710', onmouseover='highlight(243292888)', title='generator.Generator._handle_multipart&body_part :: ?'>body_part</a>)
<span class='lineno'>233</span>         # close-delimiter transport-padding
<span class='lineno'>234</span>         <a href='#generator.Generator._handle_multipart@self', id ='243290870', onmouseover='highlight(243349621)', title='generator.Generator._handle_multipart@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='243290844', onmouseover='highlight("243499566","243439954","243440883")', title='generator.Generator._fp :: DecodedGenerator'>_fp</a>.<a href='#generator.Generator.write', id ='243290840', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(&#39;\n--&#39; + <a href='#generator.Generator._handle_multipart&boundary', id ='243290783', onmouseover='highlight("243321591","243319667")', title='generator.Generator._handle_multipart&boundary :: str'>boundary</a> + &#39;--&#39;)
<span class='lineno'>235</span>         if <a href='#generator.Generator._handle_multipart@msg', id ='243290062', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.epilogue is not <span class='builtin'><a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='243290000', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'>None</a></span>:
<span class='lineno'>236</span>             print &gt;&gt; self._fp
<span class='lineno'>237</span>             if <a href='#generator.Generator._handle_multipart@self', id ='243289844', onmouseover='highlight(243349621)', title='generator.Generator._handle_multipart@self :: Generator'>self</a>.<a href='#generator.Generator._mangle_from_', id ='243289818', onmouseover='highlight(243499499)', title='generator.Generator._mangle_from_ :: ?'>_mangle_from_</a>:
<span class='lineno'>238</span>                 <a name='generator.Generator._handle_multipart&epilogue', id ='243289073', onmouseover='highlight(243288020)', title='generator.Generator._handle_multipart&epilogue :: ?'>epilogue</a> = <a href='#generator.fcre', id ='243289041', onmouseover='highlight(1808968250)', title='generator.fcre :: ?'>fcre</a>.sub(&#39;&gt;From &#39;, <a href='#generator.Generator._handle_multipart@msg', id ='243288980', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.epilogue)
<span class='lineno'>239</span>             else:
<span class='lineno'>240</span>                 <a name='generator.Generator._handle_multipart&epilogue', id ='243288827', onmouseover='highlight(243288020)', title='generator.Generator._handle_multipart&epilogue :: ?'><span class='identifier'>epilogue</span></a> = <a href='#generator.Generator._handle_multipart@msg', id ='243288144', onmouseover='highlight(243349615)', title='generator.Generator._handle_multipart@msg :: ?'>msg</a>.epilogue
<span class='lineno'>241</span>             <a href='#generator.Generator._handle_multipart@self', id ='243288077', onmouseover='highlight(243349621)', title='generator.Generator._handle_multipart@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='243288051', onmouseover='highlight("243499566","243439954","243440883")', title='generator.Generator._fp :: DecodedGenerator'>_fp</a>.<a href='#generator.Generator.write', id ='243288047', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(<a href='#generator.Generator._handle_multipart&epilogue', id ='243288020', onmouseover='highlight("243288827","243289073")', title='generator.Generator._handle_multipart&epilogue :: ?'>epilogue</a>)
<span class='lineno'>242</span> 
<span class='lineno'>243</span>     def <a name='generator.Generator._handle_multipart_signed', id ='243287959', title='generator.Generator._handle_multipart_signed :: (Generator, ?) -> None'><span class='function'>_handle_multipart_signed</span></a>(<a name='generator.Generator._handle_multipart_signed@self', id ='243287892', onmouseover='highlight("243264893","243264114","243263161","243263995")', title='generator.Generator._handle_multipart_signed@self :: Generator'><span class='parameter'>self</span></a>, <span class='parameter'><a name='generator.Generator._handle_multipart_signed@msg', id ='243287865', onmouseover='highlight(243263930)', title='generator.Generator._handle_multipart_signed@msg :: ?'>msg</span></a>):
<span class='lineno'>244</span>         # The contents of signed parts has to stay unmodified in order to keep
<span class='lineno'>245</span>         # the signature intact per RFC1847 2.1, so we disable header wrapping.
<span class='lineno'>246</span>         # RDM: This isn&#39;t enough to completely preserve the part, but it helps.
<span class='lineno'>247</span>         <span class='identifier'><a name='generator.Generator._handle_multipart_signed&old_maxheaderlen', id ='243264954', onmouseover='highlight(243263098)', title='generator.Generator._handle_multipart_signed&old_maxheaderlen :: ?'>old_maxheaderlen</span></a> = <a href='#generator.Generator._handle_multipart_signed@self', id ='243264893', onmouseover='highlight(243287892)', title='generator.Generator._handle_multipart_signed@self :: Generator'>self</a>.<a href='#generator.Generator._maxheaderlen', id ='243264867', onmouseover='highlight("243263156","243264088","243499373")', title='generator.Generator._maxheaderlen :: int'>_maxheaderlen</a>
<span class='lineno'>248</span>         try:
<span class='lineno'>249</span>             <a href='#generator.Generator._handle_multipart_signed@self', id ='243264114', onmouseover='highlight(243287892)', title='generator.Generator._handle_multipart_signed@self :: Generator'>self</a>._maxheaderlen = <span class='number'>0</span>
<span class='lineno'>250</span>             <a href='#generator.Generator._handle_multipart_signed@self', id ='243263995', onmouseover='highlight(243287892)', title='generator.Generator._handle_multipart_signed@self :: Generator'>self</a>.<a href='#generator.Generator._handle_multipart', id ='243263990', onmouseover='highlight(243350332)', title='generator.Generator._handle_multipart :: (Generator, ?) -> None'>_handle_multipart</a>(<a href='#generator.Generator._handle_multipart_signed@msg', id ='243263930', onmouseover='highlight(243287865)', title='generator.Generator._handle_multipart_signed@msg :: ?'>msg</a>)
<span class='lineno'>251</span>         finally:
<span class='lineno'>252</span>             <a href='#generator.Generator._handle_multipart_signed@self', id ='243263161', onmouseover='highlight(243287892)', title='generator.Generator._handle_multipart_signed@self :: Generator'>self</a>._maxheaderlen = <a href='#generator.Generator._handle_multipart_signed&old_maxheaderlen', id ='243263098', onmouseover='highlight(243264954)', title='generator.Generator._handle_multipart_signed&old_maxheaderlen :: ?'>old_maxheaderlen</a>
<span class='lineno'>253</span> 
<span class='lineno'>254</span>     def <a name='generator.Generator._handle_message_delivery_status', id ='243263030', title='generator.Generator._handle_message_delivery_status :: (Generator, ?) -> None'><span class='function'>_handle_message_delivery_status</span></a>(<a name='generator.Generator._handle_message_delivery_status@self', id ='243262914', onmouseover='highlight("1041272231","243260028")', title='generator.Generator._handle_message_delivery_status@self :: Generator'><span class='parameter'>self</span></a>, <a name='generator.Generator._handle_message_delivery_status@msg', id ='243262908', onmouseover='highlight(243260216)', title='generator.Generator._handle_message_delivery_status@msg :: ?'><span class='parameter'>msg</span></a>):
<span class='lineno'>255</span>         # We can&#39;t just write the headers directly to self&#39;s file object
<span class='lineno'>256</span>         # because this will leave an extra newline between the last header
<span class='lineno'>257</span>         # block and the boundary.  Sigh.
<span class='lineno'>258</span>         <span class='identifier'><a name='generator.Generator._handle_message_delivery_status&blocks', id ='243260983', onmouseover='highlight("1041269572","1041269356","1041272296")', title='generator.Generator._handle_message_delivery_status&blocks :: [?]'>blocks</a></span> = []
<span class='lineno'>259</span>         for <a name='generator.Generator._handle_message_delivery_status&part', id ='243260245', onmouseover='highlight(243259278)', title='generator.Generator._handle_message_delivery_status&part :: ?'>part</a> in <a href='#generator.Generator._handle_message_delivery_status@msg', id ='243260216', onmouseover='highlight(243262908)', title='generator.Generator._handle_message_delivery_status@msg :: ?'>msg</a>.get_payload():
<span class='lineno'>260</span>             <a name='generator.Generator._handle_message_delivery_status&s', id ='243260122', onmouseover='highlight("243259996","243259132")', title='generator.Generator._handle_message_delivery_status&s :: ?'><span class='identifier'>s</a></span> = StringIO()
<span class='lineno'>261</span>             <a name='generator.Generator._handle_message_delivery_status&g', id ='243260053', onmouseover='highlight(243259309)', title='generator.Generator._handle_message_delivery_status&g :: ?'><span class='identifier'>g</a></span> = <a href='#generator.Generator._handle_message_delivery_status@self', id ='243260028', onmouseover='highlight(243262914)', title='generator.Generator._handle_message_delivery_status@self :: Generator'>self</a>.<a href='#generator.Generator.clone', id ='243260023', onmouseover='highlight(243470546)', title='generator.Generator.clone :: (Generator, ?) -> ?'>clone</a>(<a href='#generator.Generator._handle_message_delivery_status&s', id ='243259996', onmouseover='highlight(243260122)', title='generator.Generator._handle_message_delivery_status&s :: ?'>s</a>)
<span class='lineno'>262</span>             <a href='#generator.Generator._handle_message_delivery_status&g', id ='243259309', onmouseover='highlight(243260053)', title='generator.Generator._handle_message_delivery_status&g :: ?'>g</a>.flatten(<a href='#generator.Generator._handle_message_delivery_status&part', id ='243259278', onmouseover='highlight(243260245)', title='generator.Generator._handle_message_delivery_status&part :: ?'>part</a>, unixfrom=False)
<span class='lineno'>263</span>             <a name='generator.Generator._handle_message_delivery_status&text', id ='243259160', onmouseover='highlight("1041270279","243259036")', title='generator.Generator._handle_message_delivery_status&text :: ?'><span class='identifier'>text</a></span> = <a href='#generator.Generator._handle_message_delivery_status&s', id ='243259132', onmouseover='highlight(243260122)', title='generator.Generator._handle_message_delivery_status&s :: ?'>s</a>.getvalue()
<span class='lineno'>264</span>             <a name='generator.Generator._handle_message_delivery_status&lines', id ='243259065', onmouseover='highlight("1041269441","243258073","243258104")', title='generator.Generator._handle_message_delivery_status&lines :: ?'><span class='identifier'>lines</span></a> = <a href='#generator.Generator._handle_message_delivery_status&text', id ='243259036', onmouseover='highlight(243259160)', title='generator.Generator._handle_message_delivery_status&text :: ?'>text</a>.split(&#39;\n&#39;)
<span class='lineno'>265</span>             # Strip off the unnecessary trailing empty line
<span class='lineno'>266</span>             if <a href='#generator.Generator._handle_message_delivery_status&lines', id ='243258104', onmouseover='highlight(243259065)', title='generator.Generator._handle_message_delivery_status&lines :: ?'>lines</a> and <a href='#generator.Generator._handle_message_delivery_status&lines', id ='243258073', onmouseover='highlight(243259065)', title='generator.Generator._handle_message_delivery_status&lines :: ?'>lines</a>[<span class='number'>-1</span>] == &#39;&#39;:
<span class='lineno'>267</span>                 <a href='#generator.Generator._handle_message_delivery_status&blocks', id ='1041269356', onmouseover='highlight(243260983)', title='generator.Generator._handle_message_delivery_status&blocks :: [?]'>blocks</a>.<a href='http://docs.python.org/library/stdtypes.html', id ='1041269384', onmouseover='highlight(592677897)', title='__builtin__.list.append :: ? -> None'>append</a>(<a href='#generator.NL', id ='1041269412', onmouseover='highlight(1808968282)', title='generator.NL :: str'>NL</a>.<a href='http://docs.python.org/library/stdtypes.html#str.join', id ='1041269415', onmouseover='highlight(760704539)', title='__builtin__.str.join :: ? -> str'>join</a>(<a href='#generator.Generator._handle_message_delivery_status&lines', id ='1041269441', onmouseover='highlight(243259065)', title='generator.Generator._handle_message_delivery_status&lines :: ?'>lines</a>[:<span class='number'>-1</span>]))
<span class='lineno'>268</span>             else:
<span class='lineno'>269</span>                 <a href='#generator.Generator._handle_message_delivery_status&blocks', id ='1041269572', onmouseover='highlight(243260983)', title='generator.Generator._handle_message_delivery_status&blocks :: [?]'>blocks</a>.<a href='http://docs.python.org/library/stdtypes.html', id ='1041270251', onmouseover='highlight(592677897)', title='__builtin__.list.append :: ? -> None'>append</a>(<a href='#generator.Generator._handle_message_delivery_status&text', id ='1041270279', onmouseover='highlight(243259160)', title='generator.Generator._handle_message_delivery_status&text :: ?'>text</a>)
<span class='lineno'>270</span>         # Now join all the blocks with an empty line.  This has the lovely
<span class='lineno'>271</span>         # effect of separating each block with an empty line, but not adding
<span class='lineno'>272</span>         # an extra one after the last one.
<span class='lineno'>273</span>         <a href='#generator.Generator._handle_message_delivery_status@self', id ='1041272231', onmouseover='highlight(243262914)', title='generator.Generator._handle_message_delivery_status@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='1041272236', onmouseover='highlight("243499566","243439954","243440883")', title='generator.Generator._fp :: DecodedGenerator'>_fp</a>.<a href='#generator.Generator.write', id ='1041272240', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(<a href='#generator.NL', id ='1041272267', onmouseover='highlight(1808968282)', title='generator.NL :: str'>NL</a>.<a href='http://docs.python.org/library/stdtypes.html#str.join', id ='1041272270', onmouseover='highlight(760704539)', title='__builtin__.str.join :: ? -> str'>join</a>(<a href='#generator.Generator._handle_message_delivery_status&blocks', id ='1041272296', onmouseover='highlight(243260983)', title='generator.Generator._handle_message_delivery_status&blocks :: [?]'>blocks</a>))
<span class='lineno'>274</span> 
<span class='lineno'>275</span>     def <a name='generator.Generator._handle_message', id ='1041272356', title='generator.Generator._handle_message :: (Generator, ?) -> None'><span class='function'>_handle_message</a></span>(<a name='generator.Generator._handle_message@self', id ='1041272393', onmouseover='highlight("1041301036","1041273196")', title='generator.Generator._handle_message@self :: Generator'><span class='parameter'>self</a></span>, <a name='generator.Generator._handle_message@msg', id ='1041272420', onmouseover='highlight("1041300138","1041299241")', title='generator.Generator._handle_message@msg :: ?'><span class='parameter'>msg</a></span>):
<span class='lineno'>276</span>         <a name='generator.Generator._handle_message&s', id ='1041272455', onmouseover='highlight("1041273228","1041300322")', title='generator.Generator._handle_message&s :: ?'><span class='identifier'>s</span></a> = StringIO()
<span class='lineno'>277</span>         <a name='generator.Generator._handle_message&g', id ='1041273192', onmouseover='highlight(1041300107)', title='generator.Generator._handle_message&g :: ?'><span class='identifier'>g</span></a> = <a href='#generator.Generator._handle_message@self', id ='1041273196', onmouseover='highlight(1041272393)', title='generator.Generator._handle_message@self :: Generator'>self</a>.<a href='#generator.Generator.clone', id ='1041273201', onmouseover='highlight(243470546)', title='generator.Generator.clone :: (Generator, ?) -> ?'>clone</a>(<a href='#generator.Generator._handle_message&s', id ='1041273228', onmouseover='highlight(1041272455)', title='generator.Generator._handle_message&s :: ?'>s</a>)
<span class='lineno'>278</span>         # The payload of a message/rfc822 part should be a multipart sequence
<span class='lineno'>279</span>         # of length 1.  The zeroth element of the list should be the Message
<span class='lineno'>280</span>         # object for the subpart.  Extract that object, stringify it, and
<span class='lineno'>281</span>         # write it out.
<span class='lineno'>282</span>         # Except, it turns out, when it&#39;s a string instead, which happens when
<span class='lineno'>283</span>         # and only when HeaderParser is used on a message of mime type
<span class='lineno'>284</span>         # message/rfc822.  Such messages are generated by, for example,
<span class='lineno'>285</span>         # Groupwise when forwarding unadorned messages.  (Issue 7970.)  So
<span class='lineno'>286</span>         # in that case we just emit the string body.
<span class='lineno'>287</span>         <a name='generator.Generator._handle_message&payload', id ='1041299210', onmouseover='highlight("1041301093","1041299365")', title='generator.Generator._handle_message&payload :: ?'>payload</a> = <a href='#generator.Generator._handle_message@msg', id ='1041299241', onmouseover='highlight(1041272420)', title='generator.Generator._handle_message@msg :: ?'>msg</a>.get_payload()
<span class='lineno'>288</span>         if <a href='http://docs.python.org/library/functions.html#isinstance', id ='1041299333', onmouseover='highlight(37741720)', title='__builtin__.isinstance :: ? -> int'>isinstance</a>(<a href='#generator.Generator._handle_message&payload', id ='1041299365', onmouseover='highlight("1041300291","1041299210")', title='generator.Generator._handle_message&payload :: ?'>payload</a>, <a href='http://docs.python.org/library/functions.html#list', id ='1041300046', onmouseover='highlight(118710921)', title='__builtin__.list :: <list>'>list</a>):
<span class='lineno'>289</span>             <a href='#generator.Generator._handle_message&g', id ='1041300107', onmouseover='highlight(1041273192)', title='generator.Generator._handle_message&g :: ?'>g</a>.flatten(<a href='#generator.Generator._handle_message@msg', id ='1041300138', onmouseover='highlight(1041272420)', title='generator.Generator._handle_message@msg :: ?'>msg</a>.get_payload(<span class='number'>0</span>), unixfrom=False)
<span class='lineno'>290</span>             <a name='generator.Generator._handle_message&payload', id ='1041300291', onmouseover='highlight("1041301093","1041299365")', title='generator.Generator._handle_message&payload :: ?'><span class='identifier'>payload</a></span> = <a href='#generator.Generator._handle_message&s', id ='1041300322', onmouseover='highlight(1041272455)', title='generator.Generator._handle_message&s :: ?'>s</a>.getvalue()
<span class='lineno'>291</span>         <a href='#generator.Generator._handle_message@self', id ='1041301036', onmouseover='highlight(1041272393)', title='generator.Generator._handle_message@self :: Generator'>self</a>.<a href='#generator.Generator._fp', id ='1041301062', onmouseover='highlight("243499566","243439954","243440883")', title='generator.Generator._fp :: DecodedGenerator'>_fp</a>.<a href='#generator.Generator.write', id ='1041301066', onmouseover='highlight(243498600)', title='generator.Generator.write :: (DecodedGenerator, [?]) -> None | (DecodedGenerator, str) -> None | (Generator, ?) -> None'>write</a>(<a href='#generator.Generator._handle_message&payload', id ='1041301093', onmouseover='highlight("1041300291","1041299210")', title='generator.Generator._handle_message&payload :: ?'>payload</a>)
<span class='lineno'>292</span> 
<span class='lineno'>293</span> 
<span class='lineno'>294</span> 
<span class='lineno'>295</span> <span class='constant'><a name='generator._FMT', id ='1041301127', onmouseover='highlight(1041334822)', title='generator._FMT :: str'>_FMT</a></span> = &#39;[Non-text (%(type)s) part of message omitted, filename %(filename)s]&#39;
<span class='lineno'>296</span> 
<span class='lineno'>297</span> class <span class='type-name'><a name='generator.DecodedGenerator', id ='1041302031', title='generator.DecodedGenerator :: <DecodedGenerator>'>DecodedGenerator</span></a>(<a href='#generator.Generator', id ='1041302090', onmouseover='highlight(1808966265)', title='generator.Generator :: <Generator>'>Generator</a>):
<span class='lineno'>298</span>     <span class='doc-string'>&quot;&quot;&quot;Generates a text representation of a message.
<span class='lineno'>299</span> 
<span class='lineno'>300</span>     Like the Generator base class, except that non-text parts are substituted
<span class='lineno'>301</span>     with a format string representing the part.
<span class='lineno'>302</span>     &quot;&quot;&quot;</span>
<span class='lineno'>303</span>     def <span class='function'><a name='generator.DecodedGenerator.__init__', id ='1041304041', title='generator.DecodedGenerator.__init__ :: (DecodedGenerator, ?, ?, int, ?) -> None'>__init__</span></a>(<a name='generator.DecodedGenerator.__init__@self', id ='1041304071', onmouseover='highlight("1041333893","1041334916","1041334789")', title='generator.DecodedGenerator.__init__@self :: DecodedGenerator'><span class='parameter'>self</a></span>, <a name='generator.DecodedGenerator.__init__@outfp', id ='1041304077', onmouseover='highlight(1041333899)', title='generator.DecodedGenerator.__init__@outfp :: ?'><span class='parameter'>outfp</a></span>, <a name='generator.DecodedGenerator.__init__@mangle_from_', id ='1041304105', onmouseover='highlight(1041333927)', title='generator.DecodedGenerator.__init__@mangle_from_ :: ?'><span class='parameter'>mangle_from_</a></span>=<a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1041304139', onmouseover='highlight(2016665419)', title='__builtin__.True :: ?'>True</a>, <span class='parameter'><a name='generator.DecodedGenerator.__init__@maxheaderlen', id ='1041304166', onmouseover='highlight(1041334634)', title='generator.DecodedGenerator.__init__@maxheaderlen :: int'>maxheaderlen</span></a>=<span class='number'>78</span>, <span class='parameter'><a name='generator.DecodedGenerator.__init__@fmt', id ='1041304876', onmouseover='highlight("1041335600","1041334701")', title='generator.DecodedGenerator.__init__@fmt :: ?'>fmt</span></a>=<a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1041304880', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'>None</a>):
<span class='lineno'>304</span>         <span class='doc-string'>&quot;&quot;&quot;Like Generator.__init__() except that an additional optional
<span class='lineno'>305</span>         argument is allowed.
<span class='lineno'>306</span> 
<span class='lineno'>307</span>         Walks through all subparts of a message.  If the subpart is of main
<span class='lineno'>308</span>         type `text&#39;, then it prints the decoded payload of the subpart.
<span class='lineno'>309</span> 
<span class='lineno'>310</span>         Otherwise, fmt is a format string that is used instead of the message
<span class='lineno'>311</span>         payload.  fmt is expanded with the following keywords (in
<span class='lineno'>312</span>         %(keyword)s format):
<span class='lineno'>313</span> 
<span class='lineno'>314</span>         type       : Full MIME type of the non-text part
<span class='lineno'>315</span>         maintype   : Main MIME type of the non-text part
<span class='lineno'>316</span>         subtype    : Sub-MIME type of the non-text part
<span class='lineno'>317</span>         filename   : Filename of the non-text part
<span class='lineno'>318</span>         description: Description associated with the non-text part
<span class='lineno'>319</span>         encoding   : Content transfer encoding of the non-text part
<span class='lineno'>320</span> 
<span class='lineno'>321</span>         The default value for fmt is None, meaning
<span class='lineno'>322</span> 
<span class='lineno'>323</span>         [Non-text (%(type)s) part of message omitted, filename %(filename)s]
<span class='lineno'>324</span>         &quot;&quot;&quot;</span>
<span class='lineno'>325</span>         <a href='#generator.Generator', id ='1041333832', onmouseover='highlight(1808966265)', title='generator.Generator :: <Generator>'>Generator</a>.<a href='#generator.Generator.__init__', id ='1041333863', onmouseover='highlight(1808964339)', title='generator.Generator.__init__ :: (Generator, StringIO, ?, int) -> None | (Generator, DecodedGenerator, ?, ?) -> None'>__init__</a>(<a href='#generator.DecodedGenerator.__init__@self', id ='1041333893', onmouseover='highlight(1041304071)', title='generator.DecodedGenerator.__init__@self :: DecodedGenerator'>self</a>, <a href='#generator.DecodedGenerator.__init__@outfp', id ='1041333899', onmouseover='highlight(1041304077)', title='generator.DecodedGenerator.__init__@outfp :: ?'>outfp</a>, <a href='#generator.DecodedGenerator.__init__@mangle_from_', id ='1041333927', onmouseover='highlight(1041304105)', title='generator.DecodedGenerator.__init__@mangle_from_ :: ?'>mangle_from_</a>, <a href='#generator.DecodedGenerator.__init__@maxheaderlen', id ='1041334634', onmouseover='highlight(1041304166)', title='generator.DecodedGenerator.__init__@maxheaderlen :: int'>maxheaderlen</a>)
<span class='lineno'>326</span>         if <a href='#generator.DecodedGenerator.__init__@fmt', id ='1041334701', onmouseover='highlight(1041304876)', title='generator.DecodedGenerator.__init__@fmt :: ?'>fmt</a> is <a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1041334729', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'><span class='builtin'>None</span></a>:
<span class='lineno'>327</span>             <a href='#generator.DecodedGenerator.__init__@self', id ='1041334789', onmouseover='highlight(1041304071)', title='generator.DecodedGenerator.__init__@self :: DecodedGenerator'>self</a>.<a name='generator.DecodedGenerator._fmt', id ='1041334794', onmouseover='highlight(1041358854)', title='generator.DecodedGenerator._fmt :: str'>_fmt</a> = <a href='#generator._FMT', id ='1041334822', onmouseover='highlight(1041301127)', title='generator._FMT :: str'>_FMT</a>
<span class='lineno'>328</span>         else:
<span class='lineno'>329</span>             <a href='#generator.DecodedGenerator.__init__@self', id ='1041334916', onmouseover='highlight(1041304071)', title='generator.DecodedGenerator.__init__@self :: DecodedGenerator'>self</a>.<a name='generator.DecodedGenerator._fmt', id ='1041334921', onmouseover='highlight(1041358854)', title='generator.DecodedGenerator._fmt :: str'>_fmt</a> = <a href='#generator.DecodedGenerator.__init__@fmt', id ='1041335600', onmouseover='highlight(1041304876)', title='generator.DecodedGenerator.__init__@fmt :: ?'>fmt</a>
<span class='lineno'>330</span> 
<span class='lineno'>331</span>     def <a name='generator.DecodedGenerator._dispatch', id ='1041335634', title='generator.DecodedGenerator._dispatch :: (DecodedGenerator, ?) -> None'><span class='function'>_dispatch</span></a>(<a name='generator.DecodedGenerator._dispatch@self', id ='1041335665', onmouseover='highlight(1041358849)', title='generator.DecodedGenerator._dispatch@self :: DecodedGenerator'><span class='parameter'>self</a></span>, <a name='generator.DecodedGenerator._dispatch@msg', id ='1041335692', onmouseover='highlight(1041335781)', title='generator.DecodedGenerator._dispatch@msg :: ?'><span class='parameter'>msg</a></span>):
<span class='lineno'>332</span>         for <a name='generator.DecodedGenerator._dispatch&part', id ='1041335752', onmouseover='highlight("1041360681","1041336813","1041361760","1041359654","1041363467","1041335879","1041359840","1041361542")', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a> in <a href='#generator.DecodedGenerator._dispatch@msg', id ='1041335781', onmouseover='highlight(1041335692)', title='generator.DecodedGenerator._dispatch@msg :: ?'>msg</a>.walk():
<span class='lineno'>333</span>             <a name='generator.DecodedGenerator._dispatch&maintype', id ='1041335847', onmouseover='highlight("1041337616","1041336657")', title='generator.DecodedGenerator._dispatch&maintype :: ?'><span class='identifier'>maintype</span></a> = <a href='#generator.DecodedGenerator._dispatch&part', id ='1041335879', onmouseover='highlight(1041335752)', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a>.get_content_maintype()
<span class='lineno'>334</span>             if <a href='#generator.DecodedGenerator._dispatch&maintype', id ='1041336657', onmouseover='highlight(1041335847)', title='generator.DecodedGenerator._dispatch&maintype :: ?'>maintype</a> == &#39;text&#39;:
<span class='lineno'>335</span>                 print &gt;&gt; self, <a href='#generator.DecodedGenerator._dispatch&part', id ='1041336813', onmouseover='highlight(1041335752)', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a>.get_payload(decode=True)
<span class='lineno'>336</span>             elif <a href='#generator.DecodedGenerator._dispatch&maintype', id ='1041337616', onmouseover='highlight(1041335847)', title='generator.DecodedGenerator._dispatch&maintype :: ?'>maintype</a> == &#39;multipart&#39;:
<span class='lineno'>337</span>                 # Just skip this
<span class='lineno'>338</span>                 pass
<span class='lineno'>339</span>             else:
<span class='lineno'>340</span>                 print &gt;&gt; self, <a href='#generator.DecodedGenerator._dispatch@self', id ='1041358849', onmouseover='highlight(1041335665)', title='generator.DecodedGenerator._dispatch@self :: DecodedGenerator'>self</a>.<a href='#generator.DecodedGenerator._fmt', id ='1041358854', onmouseover='highlight("1041334921","1041334794")', title='generator.DecodedGenerator._fmt :: str'>_fmt</a> % {
<span class='lineno'>341</span>                     &#39;type&#39;       : <a href='#generator.DecodedGenerator._dispatch&part', id ='1041359654', onmouseover='highlight(1041335752)', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a>.get_content_type(),
<span class='lineno'>342</span>                     &#39;maintype&#39;   : <a href='#generator.DecodedGenerator._dispatch&part', id ='1041359840', onmouseover='highlight(1041335752)', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a>.get_content_maintype(),
<span class='lineno'>343</span>                     &#39;subtype&#39;    : <a href='#generator.DecodedGenerator._dispatch&part', id ='1041360681', onmouseover='highlight(1041335752)', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a>.get_content_subtype(),
<span class='lineno'>344</span>                     &#39;filename&#39;   : <a href='#generator.DecodedGenerator._dispatch&part', id ='1041361542', onmouseover='highlight(1041335752)', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a>.get_filename(&#39;[no filename]&#39;),
<span class='lineno'>345</span>                     &#39;description&#39;: <a href='#generator.DecodedGenerator._dispatch&part', id ='1041361760', onmouseover='highlight(1041335752)', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a>.get(&#39;Content-Description&#39;,
<span class='lineno'>346</span>                                             &#39;[no description]&#39;),
<span class='lineno'>347</span>                     &#39;encoding&#39;   : <a href='#generator.DecodedGenerator._dispatch&part', id ='1041363467', onmouseover='highlight(1041335752)', title='generator.DecodedGenerator._dispatch&part :: ?'>part</a>.get(&#39;Content-Transfer-Encoding&#39;,
<span class='lineno'>348</span>                                             &#39;[no encoding]&#39;),
<span class='lineno'>349</span>                     }
<span class='lineno'>350</span> 
<span class='lineno'>351</span> 
<span class='lineno'>352</span> 
<span class='lineno'>353</span> # Helper
<span class='lineno'>354</span> <a name='generator._width', id ='1041364526', onmouseover='highlight(1041364682)', title='generator._width :: ?'>_width</a> = <a href='http://docs.python.org/library/functions.html#len', id ='1041364556', onmouseover='highlight(134591780)', title='__builtin__.len :: ? -> int'>len</a>(<a href='http://docs.python.org/library/functions.html#repr', id ='1041364581', onmouseover='highlight(49278606)', title='__builtin__.repr :: ? -> str'>repr</a>(<a href='http://docs.python.org/library/sys.html', id ='1041364586', onmouseover='highlight(609831392)', title='generator.sys :: sys'>sys</a>.maxint-<span class='number'>1</span>))
<span class='lineno'>355</span> <a name='generator._fmt', id ='1041364643', onmouseover='highlight(1041367343)', title='generator._fmt :: str'>_fmt</a> = &#39;%%0%dd&#39; % <a href='#generator._width', id ='1041364682', onmouseover='highlight(1041364526)', title='generator._width :: ?'>_width</a>
<span class='lineno'>356</span> 
<span class='lineno'>357</span> def <a name='generator._make_boundary', id ='1041365387', onmouseover='highlight(243319635)', title='generator._make_boundary :: ? -> str'><span class='function'>_make_boundary</span></a>(<span class='parameter'><a name='generator._make_boundary@text', id ='1041365423', onmouseover='highlight("1041389480","1041367434")', title='generator._make_boundary@text :: ?'>text</span></a>=<a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1041365449', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'>None</a>):
<span class='lineno'>358</span>     # Craft a random boundary.  If text is given, ensure that the chosen
<span class='lineno'>359</span>     # boundary doesn&#39;t appear in the text.
<span class='lineno'>360</span>     <a name='generator._make_boundary&token', id ='1041366479', onmouseover='highlight(1041367371)', title='generator._make_boundary&token :: ?'><span class='identifier'>token</span></a> = <a href='../random.py.html#random', id ='1041366508', onmouseover='highlight(100206292)', title='random :: random'>random</a>.<a href='../random.py.html#random.randrange', id ='1041366536', onmouseover='highlight(2134718540)', title='random.randrange :: (Random, int, int, int, int, ?, int) -> ?'>randrange</a>(<a href='http://docs.python.org/library/sys.html', id ='1041366567', onmouseover='highlight(609831392)', title='generator.sys :: sys'>sys</a>.maxint)
<span class='lineno'>361</span>     <a name='generator._make_boundary&boundary', id ='1041366604', onmouseover='highlight("1041367564","1041389601","1041367526")', title='generator._make_boundary&boundary :: str'><span class='identifier'>boundary</a></span> = (&#39;=&#39; * <span class='number'>15</span>) + (<a href='#generator._fmt', id ='1041367343', onmouseover='highlight(1041364643)', title='generator._fmt :: str'>_fmt</a> % <a href='#generator._make_boundary&token', id ='1041367371', onmouseover='highlight(1041366479)', title='generator._make_boundary&token :: ?'>token</a>) + &#39;==&#39;
<span class='lineno'>362</span>     if <a href='#generator._make_boundary@text', id ='1041367434', onmouseover='highlight(1041365423)', title='generator._make_boundary@text :: ?'>text</a> is <span class='builtin'><a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1041367463', onmouseover='highlight(2016665419)', title='__builtin__.None :: ?'>None</a></span>:
<span class='lineno'>363</span>         return <a href='#generator._make_boundary&boundary', id ='1041367526', onmouseover='highlight(1041366604)', title='generator._make_boundary&boundary :: str'>boundary</a>
<span class='lineno'>364</span>     <a name='generator._make_boundary&b', id ='1041367560', onmouseover='highlight("1041390440","1041388669")', title='generator._make_boundary&b :: str'><span class='identifier'>b</span></a> = <a href='#generator._make_boundary&boundary', id ='1041367564', onmouseover='highlight(1041366604)', title='generator._make_boundary&boundary :: str'>boundary</a>
<span class='lineno'>365</span>     <a name='generator._make_boundary&counter', id ='1041388451', onmouseover='highlight("1041390374","1041389664")', title='generator._make_boundary&counter :: int'><span class='identifier'>counter</span></a> = <span class='number'>0</span>
<span class='lineno'>366</span>     while <span class='builtin'><a href='http://docs.python.org/reference/datamodel#org/yinwang/pysonar/types', id ='1041388515', onmouseover='highlight(2016665419)', title='__builtin__.True :: ?'>True</a></span>:
<span class='lineno'>367</span>         <span class='identifier'><a name='generator._make_boundary&cre', id ='1041388550', onmouseover='highlight(1041389448)', title='generator._make_boundary&cre :: ?'>cre</span></a> = <a href='../re.py.html#re', id ='1041388577', onmouseover='highlight(100206292)', title='re :: re'>re</a>.<a href='../re.py.html#re.compile', id ='1041388580', onmouseover='highlight(2025599818)', title='re.compile :: (str, int) -> ? | (my_unicode, int) -> ?'>compile</a>(&#39;^--&#39; + <a href='../re.py.html#re', id ='1041388638', onmouseover='highlight(100206292)', title='re :: re'>re</a>.<a href='../re.py.html#re.escape', id ='1041388641', onmouseover='highlight(2025624684)', title='re.escape :: str -> ?'>escape</a>(<a href='#generator._make_boundary&b', id ='1041388669', onmouseover='highlight("1041367560","1041389597")', title='generator._make_boundary&b :: str'>b</a>) + &#39;(--)?$&#39;, <a href='../re.py.html#re', id ='1041388705', onmouseover='highlight(100206292)', title='re :: re'>re</a>.<a href='../re.py.html#re.MULTILINE', id ='1041388729', onmouseover='highlight(2025510416)', title='re.MULTILINE :: ?'>MULTILINE</a>)
<span class='lineno'>368</span>         if not <a href='#generator._make_boundary&cre', id ='1041389448', onmouseover='highlight(1041388550)', title='generator._make_boundary&cre :: ?'>cre</a>.search(<a href='#generator._make_boundary@text', id ='1041389480', onmouseover='highlight(1041365423)', title='generator._make_boundary@text :: ?'>text</a>):
<span class='lineno'>369</span>             break
<span class='lineno'>370</span>         <a name='generator._make_boundary&b', id ='1041389597', onmouseover='highlight("1041390440","1041388669")', title='generator._make_boundary&b :: str'>b</a> = <a href='#generator._make_boundary&boundary', id ='1041389601', onmouseover='highlight(1041366604)', title='generator._make_boundary&boundary :: str'>boundary</a> + &#39;.&#39; + <a href='http://docs.python.org/library/functions.html#str', id ='1041389660', onmouseover='highlight(141507136)', title='__builtin__.str :: str'>str</a>(<a href='#generator._make_boundary&counter', id ='1041389664', onmouseover='highlight(1041388451)', title='generator._make_boundary&counter :: int'>counter</a>)
<span class='lineno'>371</span>         <a href='#generator._make_boundary&counter', id ='1041390374', onmouseover='highlight(1041388451)', title='generator._make_boundary&counter :: int'>counter</a> += <span class='number'>1</span>
<span class='lineno'>372</span>     return <a href='#generator._make_boundary&b', id ='1041390440', onmouseover='highlight("1041367560","1041389597")', title='generator._make_boundary&b :: str'>b</a>
</pre></td></tr></table></body></html>